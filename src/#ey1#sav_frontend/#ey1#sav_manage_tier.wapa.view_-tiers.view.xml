<mvc:View controllerName="ey.sap.fin.cs.managetiers.controller.Tiers" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"                                                                                                                                     
	xmlns:layout="sap.ui.layout" xmlns="sap.m" xmlns:f="sap.f" xmlns:fb="sap.ui.comp.filterbar"                                                                                                                                                                   
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:smartTable="sap.ui.comp.smarttable">                                                                                                                                                                  
	<f:DynamicPage id="iddynamicPage" headerExpanded="true" showFooter="true">                                                                                                                                                                                    
		<f:title>                                                                                                                                                                                                                                                    
			<f:DynamicPageTitle>                                                                                                                                                                                                                                        
				<f:heading>                                                                                                                                                                                                                                                
					<Title text="{i18n>tierDisplayPageTitle}"></Title>                                                                                                                                                                                                        
				</f:heading>                                                                                                                                                                                                                                               
				<f:actions>                                                                                                                                                                                                                                                
					<ToolbarSpacer/>                                                                                                                                                                                                                                          
				</f:actions>                                                                                                                                                                                                                                               
			</f:DynamicPageTitle>                                                                                                                                                                                                                                       
		</f:title>                                                                                                                                                                                                                                                   
		<!-- DynamicPage Header -->                                                                                                                                                                                                                                  
		<f:header>                                                                                                                                                                                                                                                   
			<f:DynamicPageHeader pinnable="true">                                                                                                                                                                                                                       
				<smartFilterBar:SmartFilterBar id="idSmartFilterBar" entitySet="xEY1xSAV_C_TIERS" search="onSearchButtonPressed" enableBasicSearch="false"                                                                                                                 
					useToolbar="false">                                                                                                                                                                                                                                       
					<smartFilterBar:controlConfiguration>                                                                                                                                                                                                                     
						<smartFilterBar:ControlConfiguration id="idFilterBarCountry" key="ConsolidationUnit" label="{i18n>labelCountry}" hasValueHelpDialog="true"                                                                                                               
							visibleInAdvancedArea="true" mandatory="mandatory" displayBehaviour="descriptionAndId" index="1">                                                                                                                                                       
							<smartFilterBar:customControl>                                                                                                                                                                                                                          
								<ComboBox id="idFilterCountryCode" items="{ path: '/xEY1xSAV_C_CnsldCountryVH'}" showSecondaryValues="true" valueState='None'                                                                                                                          
									filterSecondaryValues="true" change="onChangeCountry">                                                                                                                                                                                                
									<core:ListItem key="{ConsolidationUnit}" text="{Country} {path:'Description', formatter: '.formatter.addDescription'} - {ConsolidationUnit}"                                                                                                          
										/>                                                                                                                                                                                                                                                   
										<!--//additionalText="{ConsolidationUnit}"-->                                                                                                                                                                                                        
								</ComboBox>                                                                                                                                                                                                                                            
							</smartFilterBar:customControl>                                                                                                                                                                                                                         
						</smartFilterBar:ControlConfiguration>                                                                                                                                                                                                                   
						<smartFilterBar:ControlConfiguration id="idFilterBarYear" key="FiscalYear" label="{i18n>labelFisclYr}" mandatory="mandatory"                                                                                                                             
							visibleInAdvancedArea="true" index="2">                                                                                                                                                                                                                 
							<smartFilterBar:customControl>                                                                                                                                                                                                                          
								<DatePicker id="idFilterFiscalYear" displayFormat="yyyy" valueFormat="yyyy" change="onChangeDatePickerFilter"/>                                                                                                                                        
							</smartFilterBar:customControl>                                                                                                                                                                                                                         
						</smartFilterBar:ControlConfiguration>                                                                                                                                                                                                                   
						<smartFilterBar:ControlConfiguration id="idIntention" key="Intention" label="{i18n>labelIntention}" hasValueHelpDialog="true"                                                                                                                            
							visibleInAdvancedArea="true" mandatory="mandatory" displayBehaviour="descriptionAndId" index="3">                                                                                                                                                       
							<smartFilterBar:customControl>                                                                                                                                                                                                                          
								<ComboBox id="idIntentionComboBox" items="{intentionVHModel>/results}" showSecondaryValues="true" valueState='None'                                                                                                                                    
									filterSecondaryValues="true" change="onChangeIntention">                                                                                                                                                                                              
									<core:ListItem id="idIntentionComboBoxLI" key="{intentionVHModel>Intention}"                                                                                                                                                                          
										text="{intentionVHModel>IntentDescription} ({intentionVHModel>TaxIntention}) - {intentionVHModel>status}"/>                                                                                                                                          
								</ComboBox>                                                                                                                                                                                                                                            
							</smartFilterBar:customControl>                                                                                                                                                                                                                         
						</smartFilterBar:ControlConfiguration>                                                                                                                                                                                                                   
					</smartFilterBar:controlConfiguration>                                                                                                                                                                                                                    
				</smartFilterBar:SmartFilterBar>                                                                                                                                                                                                                           
			</f:DynamicPageHeader>                                                                                                                                                                                                                                      
		</f:header>                                                                                                                                                                                                                                                  
		<!-- DynamicPage Content -->                                                                                                                                                                                                                                 
		<f:content>                                                                                                                                                                                                                                                  
			<Table id="idTiersTable" fixedLayout="true" mode="MultiSelect" items="{path:'tiersTableModel>/results'}" showSeparators="All">                                                                                                                              
				<headerToolbar>                                                                                                                                                                                                                                            
					<OverflowToolbar>                                                                                                                                                                                                                                         
						<content>                                                                                                                                                                                                                                                
							<Title id="idHeadText" level="H2"/>                                                                                                                                                                                                                     
							<ToolbarSpacer id="idToolbarSpacerLC"/>                                                                                                                                                                                                                 
							<Button id="rollOverBtnId" press="onPressRollOver" tooltip="{i18n>rollOverBtnTooltip}" text="{i18n>rollOverBtnTooltip}"                                                                                                                                 
								visible="{=${authModel>/changeAllowed}?true:false}" enabled="false"/>                                                                                                                                                                                  
							<ToggleButton id="idEditToggleBtn" icon="sap-icon://edit" press="onPressEditToggleBtn" pressed="{editTierModel>/edit}"                                                                                                                                  
								tooltip="{i18n>editToggleBtnTooltip}" visible="{=${authModel>/changeAllowed}?true:false}" enabled="false"/>                                                                                                                                            
							<Button icon="sap-icon://add" press="onPressAddNewTier" tooltip="{i18n>addTierBtnTooltip}" enabled="{editTierModel>/edit}"                                                                                                                              
								visible="{=${authModel>/changeAllowed}?true:false}"/>                                                                                                                                                                                                  
							<Button icon="sap-icon://delete" press="onPressDeleteTier" tooltip="{i18n>deleteTierBtnTooltip}" enabled="{editTierModel>/edit}"                                                                                                                        
								visible="{=${authModel>/changeAllowed}?true:false}"/>                                                                                                                                                                                                  
						</content>                                                                                                                                                                                                                                               
					</OverflowToolbar>                                                                                                                                                                                                                                        
				</headerToolbar>                                                                                                                                                                                                                                           
				<columns>                                                                                                                                                                                                                                                  
					<Column demandPopin="true">                                                                                                                                                                                                                               
						<Text text="{i18n>columnHeaderTierDescriptn}"/>                                                                                                                                                                                                          
					</Column>                                                                                                                                                                                                                                                 
					<Column demandPopin="true" hAlign="Right">                                                                                                                                                                                                                
						<Text text="{i18n>columnHeaderTierAmnt}" textAlign="Right"/>                                                                                                                                                                                             
					</Column>                                                                                                                                                                                                                                                 
					<!--<Column width="15%" demandPopin="true" hAlign="Center">-->                                                                                                                                                                                            
					<!--	<Text text="{i18n>columnHeaderCurrency}"/>-->                                                                                                                                                                                                        
					<!--</Column>-->                                                                                                                                                                                                                                          
					<Column demandPopin="true">                                                                                                                                                                                                                               
						<Text text="{i18n>columnHeaderTaxRate}" textAlign="Right"/>                                                                                                                                                                                              
					</Column>                                                                                                                                                                                                                                                 
				</columns>                                                                                                                                                                                                                                                 
				<items>                                                                                                                                                                                                                                                    
					<ColumnListItem vAlign="Middle">                                                                                                                                                                                                                          
						<cells>                                                                                                                                                                                                                                                  
							<Text text="{i18n>columnCellTierDesc} {path:'tiersTableModel>Sequence', formatter: '.formatter.removeLeadingZero'}"/>                                                                                                                                   
							<Input width="50%" editable="{editTierModel>/edit}" change="onChangeTierAmount" textAlign="Right"                                                                                                                                                       
								valueStateText="{i18n>errorMsgInvalidTierAmount}"                                                                                                                                                                                                      
								value="{ parts:[{path:'tiersTableModel>TierAmount'},{path:'editTierModel>/edit'},{path:'tiersTableModel>LocalCurrency'}], formatter: '.formatter.formatTierAmountDisplayAndEdit' }"/>                                                                  
							<!--<Text text=" {tiersTableModel>LocalCurrency}"/>-->                                                                                                                                                                                                  
							<Input width="50%" editable="{editTierModel>/edit}" change="onChangeTierTaxRate" textAlign="Right"                                                                                                                                                      
								valueStateText="{i18n>errorMsgInvalidTaxRate}" value="{path:'tiersTableModel>TaxRate', formatter: '.formatter.appendPercentageSign'}"/>                                                                                                                
						</cells>                                                                                                                                                                                                                                                 
					</ColumnListItem>                                                                                                                                                                                                                                         
				</items>                                                                                                                                                                                                                                                   
			</Table>                                                                                                                                                                                                                                                    
		</f:content>                                                                                                                                                                                                                                                 
		<!-- DynamicPage Footer -->                                                                                                                                                                                                                                  
		<f:footer>                                                                                                                                                                                                                                                   
			<OverflowToolbar id="idOverflowToolbar" visible="{editTierModel>/edit}">                                                                                                                                                                                    
				<Button id="idMessagePopoverBtn" icon="sap-icon://message-popup" visible="false" text="{=${message>/}.length}" tooltip="Messages"                                                                                                                          
					press="onPressHandleMessagePopover"/>                                                                                                                                                                                                                     
				<!--<Button id="idMessagePopoverBtn" icon="sap-icon://message-popup" visible="{=!!${message>/}.length}" text="{=${message>/}.length}"-->                                                                                                                   
				<!--	tooltip="Messages" press="onPressHandleMessagePopover"/>-->                                                                                                                                                                                           
				<ToolbarSpacer id="idToolbarSpacerFooter"/>                                                                                                                                                                                                                
				<Button id="idToolbarSaveBtn" text="{i18n>saveTierBtnText}" tooltip="{i18n>saveTierBtnTooltip}" type="Emphasized" press="onPressSaveTier"                                                                                                                  
					enabled="{editTierModel>/edit}"/>                                                                                                                                                                                                                         
				<Button id="idToolbarCancelBtn" text="{i18n>cancelTierBtnText}" tooltip="{i18n>cancelTierBtnTooltip}" press="onPressCancelTier"                                                                                                                            
					enabled="{editTierModel>/edit}"/>                                                                                                                                                                                                                         
			</OverflowToolbar>                                                                                                                                                                                                                                          
		</f:footer>                                                                                                                                                                                                                                                  
	</f:DynamicPage>                                                                                                                                                                                                                                              
</mvc:View>                                                                                                                                                                                                                                                    