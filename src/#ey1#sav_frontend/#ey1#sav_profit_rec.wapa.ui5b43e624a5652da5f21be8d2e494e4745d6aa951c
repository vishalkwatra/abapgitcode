sap.ui.define([                                                                                                                                                                                                                                                
	"./BaseController",                                                                                                                                                                                                                                           
	"sap/ui/core/mvc/Controller",                                                                                                                                                                                                                                 
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"sap/m/MessageToast",                                                                                                                                                                                                                                         
	"sap/m/MessageBox",                                                                                                                                                                                                                                           
	"../model/formatter",                                                                                                                                                                                                                                         
	"sap/ui/core/routing/History",                                                                                                                                                                                                                                
	"sap/ui/model/odata/ODataUtils"                                                                                                                                                                                                                               
], function (BaseController, Controller, Filter, FilterOperator, JSONModel, MessageToast, MessageBox, formatter, History, ODataUtils) {                                                                                                                        
	"use strict";                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
	const sLocalCurrencyKey = "Local";                                                                                                                                                                                                                            
	const sGroupCurrencyKey = "Group";                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	return BaseController.extend("ey.sap.fin.cs.profitrecon.controller.PostPTAEntries", {                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		// set the formatter                                                                                                                                                                                                                                         
		formatter: formatter,                                                                                                                                                                                                                                        
		/**                                                                                                                                                                                                                                                          
		 * Called when a controller is instantiated and its View controls (if available) are already created.                                                                                                                                                        
		 * Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.                                                                                                                                       
		 * @memberOf ey.sap.fin.cs.recgaapstattax.view.PostPTAEntries                                                                                                                                                                                                
		 */                                                                                                                                                                                                                                                          
		onInit: function () {                                                                                                                                                                                                                                        
			this.oRouter = this.getOwnerComponent().getRouter();                                                                                                                                                                                                        
			this.oRouter.getRoute("DisplayPTA").attachMatched(this._onRouteMatched, this);                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	PRIVATE Methods	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/                                                                                                                                         
                                                                                                                                                                                                                                                               
		_onRouteMatched: function (oEvent) {                                                                                                                                                                                                                         
			// debugger;                                                                                                                                                                                                                                                
			this.getBusyDialog().close();                                                                                                                                                                                                                               
			let that = this,                                                                                                                                                                                                                                            
				docId = oEvent.getParameter("arguments").docId,                                                                                                                                                                                                            
				ptaDisplayConfigModel = this.getOwnerComponent().getModel("PTAEntryConfigData");                                                                                                                                                                           
			// Get the Config Model which was set to Component JS - Model is set in inInit of Reconciliation Controller                                                                                                                                                 
                                                                                                                                                                                                                                                               
			// If Navigated to PTA Screen - Show PTA Screen                                                                                                                                                                                                             
			if (ptaDisplayConfigModel && ptaDisplayConfigModel.getData()) {                                                                                                                                                                                             
				this._setDynamicPageContent(docId);                                                                                                                                                                                                                        
				// Attching back button event                                                                                                                                                                                                                              
				// this.getOwnerComponent().getService("ShellUIService").then(function (oShellService) {                                                                                                                                                                   
				// 	oShellService.setBackNavigation(that._onPressShellNavBack.bind(that));                                                                                                                                                                                 
				// });                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				if (docId) {                                                                                                                                                                                                                                               
					// Navigation from PTA drill down                                                                                                                                                                                                                         
					let ptaDisplayConfigData = ptaDisplayConfigModel.getData(),                                                                                                                                                                                               
						oDisplayFilterData = {                                                                                                                                                                                                                                   
							DocumentNumber: docId,                                                                                                                                                                                                                                  
							ConsolidationUnit: ptaDisplayConfigData.ConsolidationUnit,                                                                                                                                                                                              
							FiscalYear: ptaDisplayConfigData.FiscalYear                                                                                                                                                                                                             
						};                                                                                                                                                                                                                                                       
					this._setPTAEntriesToDisplayMode(oDisplayFilterData);                                                                                                                                                                                                     
				}                                                                                                                                                                                                                                                          
			} else { // Screen refreshed - Navigate to main screen                                                                                                                                                                                                      
				let oRouter = this.getRouter();                                                                                                                                                                                                                            
				this.getBusyDialog().open();                                                                                                                                                                                                                               
				oRouter.navTo("profitrecon", {}, true);                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_setDynamicPageContent: function (docId) {                                                                                                                                                                                                                   
			let oDynamicPage = this.getView().byId("idPagePostPTAEntries");                                                                                                                                                                                             
			oDynamicPage.setContent(undefined);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			// Load 'PTAScreenTableCreate' fragment                                                                                                                                                                                                                     
			// if (!this._oPTATableCreateFragment) {                                                                                                                                                                                                                    
			// 	this._oPTATableCreateFragment = sap.ui.xmlfragment("tablePTAEntriesCreate",                                                                                                                                                                             
			// 		"ey.sap.fin.cs.profitrecon.fragment.PTAScreenTableCreate", this);                                                                                                                                                                                      
			// 	this.getView().addDependent(this._oPTATableCreateFragment);                                                                                                                                                                                             
			// }                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			// Load 'PTAScreenTableDisplay' fragment                                                                                                                                                                                                                    
			if (!this._oPTATableDisplayFragment) {                                                                                                                                                                                                                      
				this._oPTATableDisplayFragment = sap.ui.xmlfragment("tablePTAEntriesCreate",                                                                                                                                                                               
					"ey.sap.fin.cs.profitrecon.fragment.PTAScreenTableDetails", this);                                                                                                                                                                                        
				this.getView().addDependent(this._oPTATableDisplayFragment);                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (!docId) {                                                                                                                                                                                                                                               
				oDynamicPage.setContent(this._oPTATableCreateFragment);                                                                                                                                                                                                    
			} else {                                                                                                                                                                                                                                                    
				oDynamicPage.setContent(this._oPTATableDisplayFragment);                                                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_structureHeaderData: function () {                                                                                                                                                                                                                          
			let oNewDate = new Date(),                                                                                                                                                                                                                                  
				sConsolidationUnit = this.postPTAEntriesConfigModel.getData().ConsolidationUnit,                                                                                                                                                                           
				iFiscalYear = this.postPTAEntriesConfigModel.getData().FiscalYear,                                                                                                                                                                                         
				oHeaderData = this.postPTAEntriesConfigModel.getData().currLocalGroupVHData;                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Get Header data - Local & Group currency                                                                                                                                                                                                                 
			let oHeaderLCData = (oHeaderData.results.find(item => item.ConsolidationUnit === sConsolidationUnit && item.CurrencyType ===                                                                                                                                
				sLocalCurrencyKey));                                                                                                                                                                                                                                       
			let oHeaderGCData = (oHeaderData.results.find(item => item.ConsolidationUnit === sConsolidationUnit && item.CurrencyType ===                                                                                                                                
				sGroupCurrencyKey));                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			let oHData = {                                                                                                                                                                                                                                              
				DocumentNumber: "",                                                                                                                                                                                                                                        
				ConsolidationUnit: oHeaderLCData.ConsolidationUnit,                                                                                                                                                                                                        
				ConsolidationUnitDescription: oHeaderLCData.ConsolidationUnitDescription,                                                                                                                                                                                  
				LocalCurrency: oHeaderLCData.Currency,                                                                                                                                                                                                                     
				GroupCurrency: oHeaderGCData.Currency,                                                                                                                                                                                                                     
				FiscalPeriod: "",                                                                                                                                                                                                                                          
				PostingDate: oNewDate.getFullYear() === iFiscalYear ? oNewDate : "",                                                                                                                                                                                       
				PostingDateDisplay: "",                                                                                                                                                                                                                                    
				FiscalYear: iFiscalYear.toString()                                                                                                                                                                                                                         
			};                                                                                                                                                                                                                                                          
			// setting value state of datepicker to default                                                                                                                                                                                                             
			this.getView().byId("idPostingDatePickerPTAEntries").setValueState("None");                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			this.setModel(new JSONModel(oHData), "postPTAHeaderModel");                                                                                                                                                                                                 
			this._fetchTableData(oHData);                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			if (oHData.PostingDate) {                                                                                                                                                                                                                                   
				this._callDeterminePeriod();                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_fetchTableData: function (oHeaderData) {                                                                                                                                                                                                                    
			let oServiceCallModel = this.getModel(),                                                                                                                                                                                                                    
				that = this,                                                                                                                                                                                                                                               
				oMainFilter = this._generateTableServiceCallFilters(oHeaderData),                                                                                                                                                                                          
				postPTAConfigModelData = this.postPTAEntriesConfigModel.getData();                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			oServiceCallModel.read(postPTAConfigModelData.sServicePath, {                                                                                                                                                                                               
				method: "GET",                                                                                                                                                                                                                                             
				urlParameters: {                                                                                                                                                                                                                                           
					$select: "GLAccount,GLAccountMdmText,FinancialStatementItem,ConsolidationRptgItemMdmText,TaxPTA,TaxClosingBalance"                                                                                                                                        
				},                                                                                                                                                                                                                                                         
				filters: [oMainFilter],                                                                                                                                                                                                                                    
				sorters: [                                                                                                                                                                                                                                                 
					new sap.ui.model.Sorter("GLAccount")                                                                                                                                                                                                                      
				],                                                                                                                                                                                                                                                         
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					that._setTableModelStructure(oData);                                                                                                                                                                                                                      
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					MessageToast.show(that.getResourceBundle().getText("serviceCallErrorPTAHeader"));                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_generateTableServiceCallFilters: function (oHeaderData) {                                                                                                                                                                                                   
			let postPTAConfigModelData = this.postPTAEntriesConfigModel.getData(),                                                                                                                                                                                      
				aGlEntriesList = postPTAConfigModelData.postPTAEntriesList;                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			// Generating GL Account filters                                                                                                                                                                                                                            
			let aGlFiltersArray = [];                                                                                                                                                                                                                                   
			for (let sGlAccount of aGlEntriesList) {                                                                                                                                                                                                                    
				aGlFiltersArray.push(new Filter("GLAccount", FilterOperator.EQ, sGlAccount));                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
			let oGlAccountsFiltersOr = new Filter({                                                                                                                                                                                                                     
				filters: aGlFiltersArray                                                                                                                                                                                                                                   
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			// Generating General filters for service call                                                                                                                                                                                                              
			let oGeneralFiltersAnd = new Filter({                                                                                                                                                                                                                       
				filters: [new Filter("ConsolidationUnit", FilterOperator.EQ, oHeaderData.ConsolidationUnit),                                                                                                                                                               
					new Filter("ChartOfAccounts", FilterOperator.EQ, "CANA"),                                                                                                                                                                                                 
					new Filter("ConsolidationChartofAccounts", FilterOperator.EQ, postPTAConfigModelData.globalParameterData.globalParameters.ConsolidationChartofAccounts),                                                                                                  
					new Filter("MainCurrency", FilterOperator.EQ, oHeaderData.LocalCurrency)                                                                                                                                                                                  
				],                                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			// Generating Combined filters                                                                                                                                                                                                                              
			let oMainFilter = new Filter({                                                                                                                                                                                                                              
				filters: [oGlAccountsFiltersOr, oGeneralFiltersAnd],                                                                                                                                                                                                       
				and: true                                                                                                                                                                                                                                                  
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			return oMainFilter;                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_setTableModelStructure: function (oData) {                                                                                                                                                                                                                  
			let aFinalDataSet = [];                                                                                                                                                                                                                                     
			let oRemainingEntriesObj = {                                                                                                                                                                                                                                
				// Generated in UI                                                                                                                                                                                                                                         
				AmountInLocalCurrency: "0.00",                                                                                                                                                                                                                             
				AmountInGroupCurrency: "0.00",                                                                                                                                                                                                                             
				Text: this.getResourceBundle().getText("commentsPTAEntriesText")                                                                                                                                                                                           
			};                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			for (let i = 0; i < oData.results.length; i++) {                                                                                                                                                                                                            
				aFinalDataSet.push(Object.assign({}, oData.results[i], oRemainingEntriesObj, {                                                                                                                                                                             
					LineItem: (i + 1).toString()                                                                                                                                                                                                                              
				}));                                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.setModel(new JSONModel({                                                                                                                                                                                                                               
				results: aFinalDataSet                                                                                                                                                                                                                                     
			}), "postPTATableModel");                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			// Set header for table                                                                                                                                                                                                                                     
			this._oPTATableCreateFragment.getHeaderToolbar().getTitleControl().setText(this.getResourceBundle().getText("selectedAccountsText", [                                                                                                                       
				this._oPTATableCreateFragment.getBinding("items").getLength()                                                                                                                                                                                              
			]));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_callDeterminePeriod: function () {                                                                                                                                                                                                                          
			let oHeaderModel = this.getModel("postPTAHeaderModel"),                                                                                                                                                                                                     
				oHeaderData = oHeaderModel.getData(),                                                                                                                                                                                                                      
				oModel = this.getOwnerComponent().getModel(),                                                                                                                                                                                                              
				that = this,                                                                                                                                                                                                                                               
				sServiceUrl = "/DeterminePeriod";                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// Broser will remove timezone Offset. Hence neglecting what browser is converting.                                                                                                                                                                         
			oHeaderData.PostingDate.setMinutes(oHeaderData.PostingDate.getMinutes() - oHeaderData.PostingDate.getTimezoneOffset());                                                                                                                                     
                                                                                                                                                                                                                                                               
			oModel.callFunction(sServiceUrl, {                                                                                                                                                                                                                          
				method: "GET",                                                                                                                                                                                                                                             
				urlParameters: {                                                                                                                                                                                                                                           
					ConsolidationLedger: this.postPTAEntriesConfigModel.getData().globalParameterData.reconData.tax,                                                                                                                                                          
					ConsolidationUnit: oHeaderData.ConsolidationUnit,                                                                                                                                                                                                         
					Date: oHeaderData.PostingDate                                                                                                                                                                                                                             
				},                                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					that._iFetchedFiscalPeriod = oData.Period;                                                                                                                                                                                                                
					oHeaderModel.setProperty("/FiscalPeriod", oData.Period);                                                                                                                                                                                                  
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					oHeaderModel.setProperty("/FiscalPeriod", "");                                                                                                                                                                                                            
					MessageBox.error(JSON.parse(oError.responseText).error.message.value);                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_setPTAEntriesToDisplayMode: function (oDisplayFilterData) {                                                                                                                                                                                                 
			let oServiceCallModel = this.getModel(),                                                                                                                                                                                                                    
				that = this;                                                                                                                                                                                                                                               
			// Service Call for TABLE data                                                                                                                                                                                                                              
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			oServiceCallModel.read("/xEY1xSAV_C_Rec_PTA", {                                                                                                                                                                                                             
				method: "GET",                                                                                                                                                                                                                                             
				filters: [new Filter("DocumentNumber", FilterOperator.EQ, oDisplayFilterData.DocumentNumber),                                                                                                                                                              
					new Filter("ConsolidationUnit", FilterOperator.EQ, oDisplayFilterData.ConsolidationUnit),                                                                                                                                                                 
					new Filter("FiscalYear", FilterOperator.EQ, oDisplayFilterData.FiscalYear)                                                                                                                                                                                
				],                                                                                                                                                                                                                                                         
				sorters: [                                                                                                                                                                                                                                                 
					new sap.ui.model.Sorter("GLAccount")                                                                                                                                                                                                                      
				],                                                                                                                                                                                                                                                         
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					that.getBusyDialog().close();                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					// Setting data for header                                                                                                                                                                                                                                
					let oTempEntry = oData.results[0];                                                                                                                                                                                                                        
					let oHData = {                                                                                                                                                                                                                                            
						DocumentNumber: oTempEntry.DocumentNumber,                                                                                                                                                                                                               
						ConsolidationUnit: oTempEntry.ConsolidationUnit,                                                                                                                                                                                                         
						ConsolidationUnitDescription: oTempEntry.ConsolidationUnitDescription,                                                                                                                                                                                   
						LocalCurrency: oTempEntry.LocalCurrency,                                                                                                                                                                                                                 
						GroupCurrency: oTempEntry.GroupCurrency,                                                                                                                                                                                                                 
						FiscalPeriod: formatter.convertStringToInt(oTempEntry.FiscalPeriod),                                                                                                                                                                                     
						PostingDate: oTempEntry.PostingDate,                                                                                                                                                                                                                     
						PostingDateDisplay: oTempEntry.PostingDateDisplay,                                                                                                                                                                                                       
						FiscalYear: oTempEntry.FiscalYear                                                                                                                                                                                                                        
					};                                                                                                                                                                                                                                                        
					that.setModel(new JSONModel(oHData), "postPTAHeaderModel");                                                                                                                                                                                               
					that.getModel("postPTAHeaderModel").refresh(true);                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					// Setting Data for table                                                                                                                                                                                                                                 
					that.setModel(new JSONModel(oData), "postPTATableDisplayModel");                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					that._oPTATableDisplayFragment.getHeaderToolbar().getTitleControl().setText(that.getResourceBundle().getText(                                                                                                                                             
						"accountsText", [                                                                                                                                                                                                                                        
							that._oPTATableDisplayFragment.getBinding("items").getLength()                                                                                                                                                                                          
						]));                                                                                                                                                                                                                                                     
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_onPressShellNavBack: function () {                                                                                                                                                                                                                          
			let docId = this.getView().getModel("postPTAHeaderModel").getData().DocumentNumber;                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			if (docId === "") {                                                                                                                                                                                                                                         
				this._unsavedChangesWarning();                                                                                                                                                                                                                             
			} else {                                                                                                                                                                                                                                                    
				if (History.getInstance().getPreviousHash() !== undefined) {                                                                                                                                                                                               
					// this.postPTAEntriesConfigModel.setProperty("/DocumentNumber", docId);                                                                                                                                                                                  
					window.history.go(-1);                                                                                                                                                                                                                                    
				} else {                                                                                                                                                                                                                                                   
					this.oRouter.navTo("Reconciliation", {}, true);                                                                                                                                                                                                           
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_unsavedChangesWarning: function () {                                                                                                                                                                                                                        
			let sBtnAction = this.getResourceBundle().getText("btnTextLeavePage");                                                                                                                                                                                      
			MessageBox.warning(this.getResourceBundle().getText("errorMsgLeavePTAEntriesScreen"), {                                                                                                                                                                     
				actions: [sBtnAction, MessageBox.Action.CANCEL],                                                                                                                                                                                                           
				emphasizedAction: sBtnAction,                                                                                                                                                                                                                              
				onClose: function (sAction) {                                                                                                                                                                                                                              
					if (sAction === sBtnAction) {                                                                                                                                                                                                                             
						if (History.getInstance().getPreviousHash() !== undefined) {                                                                                                                                                                                             
							window.history.go(-1);                                                                                                                                                                                                                                  
						} else {                                                                                                                                                                                                                                                 
							this.oRouter.navTo("Reconciliation", {}, true);                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_callMassCurrencyConversion: function () {                                                                                                                                                                                                                   
			// Variable declaration                                                                                                                                                                                                                                     
			let oOdataModel = this.getOwnerComponent().getModel(),                                                                                                                                                                                                      
				oTableModel = this.getModel("postPTATableModel"),                                                                                                                                                                                                          
				oTableModelData = oTableModel.getData().results,                                                                                                                                                                                                           
				oTableHeaderData = this.getModel("postPTAHeaderModel").getData(),                                                                                                                                                                                          
				sEncodedDate = encodeURIComponent(ODataUtils.formatValue(oTableHeaderData.PostingDate, "Edm.DateTime")),                                                                                                                                                   
				that = this;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// Set batch usage - true                                                                                                                                                                                                                                   
			oOdataModel.setUseBatch(true);                                                                                                                                                                                                                              
			oOdataModel.setChangeGroups({                                                                                                                                                                                                                               
				"/Z_RECON_GAAP_STAT_TAX_SRV": {                                                                                                                                                                                                                            
					groupId: "groupIdConvertCurrency",                                                                                                                                                                                                                        
					changeSetId: "ID",                                                                                                                                                                                                                                        
					single: false                                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			// Setting the deferred groupd&nbsp;                                                                                                                                                                                                                        
			oOdataModel.setDeferredGroups(["groupIdConvertCurrency"]);                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// Generate ChangeSet                                                                                                                                                                                                                                       
			let bAmountEntryExists = false;                                                                                                                                                                                                                             
			for (let oEntry of oTableModelData) {                                                                                                                                                                                                                       
				let tempAmount = ODataUtils.formatValue(parseFloat(oEntry.AmountInLocalCurrency), "Edm.Decimal");                                                                                                                                                          
				if (parseFloat(oEntry.AmountInLocalCurrency) !== 0) {                                                                                                                                                                                                      
					bAmountEntryExists = true;                                                                                                                                                                                                                                
					oOdataModel.read(                                                                                                                                                                                                                                         
						"/ConvertCurrencySet(FromAmount=" + tempAmount + ",FromCurrency='" + oTableHeaderData.LocalCurrency +                                                                                                                                                    
						"',ExchangeRateDate=" + sEncodedDate + ",ToCurrency='" + oTableHeaderData.GroupCurrency + "')", {                                                                                                                                                        
							groupId: "groupIdConvertCurrency"                                                                                                                                                                                                                       
						});                                                                                                                                                                                                                                                      
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// If all rows have LC === 0, then do not execute the code.                                                                                                                                                                                                 
			if (!bAmountEntryExists) {                                                                                                                                                                                                                                  
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			oOdataModel.submitChanges({                                                                                                                                                                                                                                 
				groupId: "groupIdConvertCurrency",                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					let aBatchResponses = oData.__batchResponses;                                                                                                                                                                                                             
					if (!(aBatchResponses.length > 0)) {                                                                                                                                                                                                                      
						return;                                                                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					// Function returing the matching value                                                                                                                                                                                                                   
					let fnFindDataMatched = (aResponses, oEntry) => {                                                                                                                                                                                                         
						// Find the matching converted currency in responses                                                                                                                                                                                                     
						let oMatchingResult = aResponses.find(item => parseFloat(item.data.FromAmount) ===                                                                                                                                                                       
							Math.round(parseFloat(oEntry.AmountInLocalCurrency)) &&                                                                                                                                                                                                 
							item.data.FromCurrency === oTableHeaderData.LocalCurrency);                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
						// If match found, update the corresponding converted currency.                                                                                                                                                                                          
						if (oMatchingResult) {                                                                                                                                                                                                                                   
							return oMatchingResult.data.ToAmount;                                                                                                                                                                                                                   
						}                                                                                                                                                                                                                                                        
						return 0;                                                                                                                                                                                                                                                
					};                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					for (let oEntry of oTableModelData) {                                                                                                                                                                                                                     
						if (parseFloat(oEntry.AmountInLocalCurrency) !== 0) {                                                                                                                                                                                                    
							oEntry.AmountInGroupCurrency = fnFindDataMatched(aBatchResponses, oEntry);                                                                                                                                                                              
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					oTableModel.refresh(true);                                                                                                                                                                                                                                
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onPressTestButton: function () {},                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~	Event Handlers	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/                                                                                                                                                                
                                                                                                                                                                                                                                                               
		onChangePostPTATableLocalCurrency: function (oEvent) {                                                                                                                                                                                                       
			// No data entered in currency, Then do not execute remaining code.                                                                                                                                                                                         
			let oSrc = oEvent.getSource(),                                                                                                                                                                                                                              
				oCurrenctDataObject = oSrc.getBindingContext("postPTATableModel").getObject();                                                                                                                                                                             
			if (oSrc.getValue() === "" || parseFloat(oSrc.getValue(), [10]) === 0) {                                                                                                                                                                                    
				oCurrenctDataObject.AmountInGroupCurrency = parseFloat(0).toFixed(2);                                                                                                                                                                                      
				oCurrenctDataObject.AmountInLocalCurrency = parseFloat(0).toFixed(2);                                                                                                                                                                                      
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			let oModel = this.getOwnerComponent().getModel(),                                                                                                                                                                                                           
				oHeaderData = this.getModel("postPTAHeaderModel").getData(),                                                                                                                                                                                               
				oTableModel = this.getModel("postPTATableModel"),                                                                                                                                                                                                          
				that = this;                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			// If no date is maintained in Header.                                                                                                                                                                                                                      
			if (!(new Date(oHeaderData.PostingDate) instanceof Date) || !oHeaderData.PostingDate) {                                                                                                                                                                     
				let oCtrl = this.getView().byId("idPostingDatePickerPTAEntries");                                                                                                                                                                                          
				oCtrl.setValueState("Error");                                                                                                                                                                                                                              
				oCtrl.setValueStateText(this.getResourceBundle().getText("errorMsgPostingDateInvalid"));                                                                                                                                                                   
				oCurrenctDataObject.AmountInLocalCurrency = parseFloat(0).toFixed(2);                                                                                                                                                                                      
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			oModel.callFunction("/ConvertCurrency", {                                                                                                                                                                                                                   
				method: "GET",                                                                                                                                                                                                                                             
				urlParameters: {                                                                                                                                                                                                                                           
					Amount: oCurrenctDataObject.AmountInLocalCurrency,                                                                                                                                                                                                        
					FromCurrency: oHeaderData.LocalCurrency,                                                                                                                                                                                                                  
					ToCurrency: oHeaderData.GroupCurrency,                                                                                                                                                                                                                    
					ExchangeRateDate: new Date(oHeaderData.PostingDate)                                                                                                                                                                                                       
				},                                                                                                                                                                                                                                                         
				success: function (oData) {                                                                                                                                                                                                                                
					oSrc.setValue(parseFloat(oSrc.getValue()).toFixed(2));                                                                                                                                                                                                    
					oCurrenctDataObject.AmountInGroupCurrency = parseFloat(oData.ToAmount).toFixed(2);                                                                                                                                                                        
					oTableModel.refresh(true);                                                                                                                                                                                                                                
					that.getBusyDialog().close();                                                                                                                                                                                                                             
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					MessageBox.error(that.getResourceBundle().getText("errorMsgReadingCurrecyConversion"));                                                                                                                                                                   
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onSearchPostPTAEntriesTable: function (oEvent) {                                                                                                                                                                                                             
			let sQuery = oEvent.getSource().getValue(),                                                                                                                                                                                                                 
				aFilters = [],                                                                                                                                                                                                                                             
				oTable = this._oPTATableCreateFragment || oEvent.getSource().getParent().getParent(),                                                                                                                                                                      
				oTableBinding = oTable.getBinding("items");                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                          
				aFilters = [new Filter("GLAccount", FilterOperator.Contains, sQuery),                                                                                                                                                                                      
					new Filter("GLAccountMdmText", FilterOperator.Contains, sQuery)                                                                                                                                                                                           
				];                                                                                                                                                                                                                                                         
				oTableBinding.filter(new Filter(aFilters, false));                                                                                                                                                                                                         
			} else {                                                                                                                                                                                                                                                    
				oTableBinding.filter([]);                                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
			oTable.getHeaderToolbar().getTitleControl().setText(this.getResourceBundle().getText("selectedAccountsText", [oTableBinding.getLength()]));                                                                                                                 
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onSearchPostPTAEntriesTableDisplay: function (oEvent) {                                                                                                                                                                                                      
			let sQuery = oEvent.getSource().getValue(),                                                                                                                                                                                                                 
				aFilters = [],                                                                                                                                                                                                                                             
				oTable = this._oPTATableDisplayFragment || oEvent.getSource().getParent().getParent(),                                                                                                                                                                     
				oTableBinding = oTable.getBinding("items");                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			if (sQuery && sQuery.length > 0) {                                                                                                                                                                                                                          
				aFilters = [new Filter("GLAccount", FilterOperator.Contains, sQuery),                                                                                                                                                                                      
					new Filter("GLAccountMdmText", FilterOperator.Contains, sQuery)                                                                                                                                                                                           
				];                                                                                                                                                                                                                                                         
				oTableBinding.filter(new Filter(aFilters, false));                                                                                                                                                                                                         
			} else {                                                                                                                                                                                                                                                    
				oTableBinding.filter([]);                                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
			oTable.getHeaderToolbar().getTitleControl().setText(this.getResourceBundle().getText("selectedAccountsText", [oTableBinding.getLength()]));                                                                                                                 
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangePostingDatePTA: function (oEvent) {                                                                                                                                                                                                                  
			let oSrc = oEvent.getSource(),                                                                                                                                                                                                                              
				oDate = oSrc.getDateValue(),                                                                                                                                                                                                                               
				oDateFormatter = sap.ui.core.format.DateFormat.getDateTimeInstance({                                                                                                                                                                                       
					pattern: "dd.MM.yyyy"                                                                                                                                                                                                                                     
				}),                                                                                                                                                                                                                                                        
				oHeaderModel = this.getModel("postPTAHeaderModel");                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			// If no date change happened - Do not execute.                                                                                                                                                                                                             
			if (oDateFormatter.format(oSrc.getDateValue()) === oDateFormatter.format(oHeaderModel.getProperty("/PostingDate"))) {                                                                                                                                       
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// Valid date is entred or not                                                                                                                                                                                                                              
			if (oDate && oEvent.getParameter("valid")) {                                                                                                                                                                                                                
				oSrc.setValueState("None");                                                                                                                                                                                                                                
				// oHeaderModel.setProperty("/FiscalYear", oDate.getFullYear().toString());                                                                                                                                                                                
				oHeaderModel.setProperty("/PostingDate", oDate);                                                                                                                                                                                                           
				this._callDeterminePeriod();                                                                                                                                                                                                                               
				this._callMassCurrencyConversion();                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
				// oHeaderModel.setProperty("/FiscalYear", "");                                                                                                                                                                                                            
				oHeaderModel.setProperty("/PostingDate", "");                                                                                                                                                                                                              
				oHeaderModel.setProperty("/FiscalPeriod", "");                                                                                                                                                                                                             
				oSrc.setValueState("Error");                                                                                                                                                                                                                               
				oSrc.setValueStateText(this.getResourceBundle().getText("errorMsgPostingDateInvalid"));                                                                                                                                                                    
				MessageBox.error(this.getResourceBundle().getText("errorMsgPostingDateInvalid"));                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPressPostBtnPostPTAEntries: function (oEvent) {                                                                                                                                                                                                            
			// If Header data not available - Do not execute further.                                                                                                                                                                                                   
			let oHeaderModelData = this.getModel("postPTAHeaderModel").getData();                                                                                                                                                                                       
			if (!oHeaderModelData.PostingDate || !oHeaderModelData.FiscalPeriod) {                                                                                                                                                                                      
				MessageBox.error(this.getResourceBundle().getText("errorMsgPostingDateInvalid"));                                                                                                                                                                          
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
			                                                                                                                                                                                                                                                            
			if (oHeaderModelData.FiscalPeriod > 17) {                                                                                                                                                                                                                   
				MessageBox.error(this.getResourceBundle().getText("errorMsgFiscalPeriodInvalid"));                                                                                                                                                                         
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// If different FiscalYear is selected in previous screen.                                                                                                                                                                                                  
			if (oHeaderModelData.PostingDate.getFullYear().toString() !== oHeaderModelData.FiscalYear) {                                                                                                                                                                
				MessageBox.error(this.getResourceBundle().getText("errorMsgPostingDateMismatch", [oHeaderModelData.FiscalYear]));                                                                                                                                          
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// If no amount is entered for any entry - Give Error                                                                                                                                                                                                       
			let oTableModelData = this.getModel("postPTATableModel").getData().results;                                                                                                                                                                                 
			if (!oTableModelData.find(oTempObj => parseInt(oTempObj.AmountInLocalCurrency, 10) !== 0 && oTempObj.AmountInLocalCurrency !== "")) {                                                                                                                       
				MessageBox.error(this.getResourceBundle().getText("errorMsgEnterLocalCurrencyAmout"));                                                                                                                                                                     
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// If any entry has LC === 0, then give warning message.                                                                                                                                                                                                    
			let that = this;                                                                                                                                                                                                                                            
			if (oTableModelData.find(oTempObj => parseInt(oTempObj.AmountInLocalCurrency, 10) === 0 || oTempObj.AmountInLocalCurrency === "")) {                                                                                                                        
				MessageBox.warning(this.getResourceBundle().getText("warningMsgPTALCAmountNotEnteredForSomeFields"), {                                                                                                                                                     
					actions: [MessageBox.Action.OK, MessageBox.Action.CANCEL],                                                                                                                                                                                                
					emphasizedAction: MessageBox.Action.OK,                                                                                                                                                                                                                   
					onClose: function (sAction) {                                                                                                                                                                                                                             
						if (sAction === MessageBox.Action.OK) {                                                                                                                                                                                                                  
							that.postBatchChangesEntries();                                                                                                                                                                                                                         
						} else {                                                                                                                                                                                                                                                 
							return;                                                                                                                                                                                                                                                 
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			} else {                                                                                                                                                                                                                                                    
				this.postBatchChangesEntries();                                                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		postBatchChangesEntries: function () {                                                                                                                                                                                                                       
			// Variable declaration                                                                                                                                                                                                                                     
			let oOdataModel = this.getOwnerComponent().getModel(),                                                                                                                                                                                                      
				oDateFormatter = sap.ui.core.format.DateFormat.getDateTimeInstance({                                                                                                                                                                                       
					pattern: "yyyy-MM-ddT00:00:00"                                                                                                                                                                                                                            
				}),                                                                                                                                                                                                                                                        
				that = this,                                                                                                                                                                                                                                               
				oTableModelData = this.getModel("postPTATableModel").getData().results,                                                                                                                                                                                    
				oHeaderModelData = this.getModel("postPTAHeaderModel").getData();                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// Set batch usage - true                                                                                                                                                                                                                                   
			oOdataModel.setUseBatch(true);                                                                                                                                                                                                                              
			oOdataModel.setChangeGroups({                                                                                                                                                                                                                               
				"/Z_RECON_GAAP_STAT_TAX_SRV": {                                                                                                                                                                                                                            
					groupId: "groupIdPostPTA",                                                                                                                                                                                                                                
					changeSetId: "ID",                                                                                                                                                                                                                                        
					single: false                                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			// Setting the deferred groupd&nbsp;                                                                                                                                                                                                                        
			oOdataModel.setDeferredGroups(["groupIdPostPTA"]);                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// Payload & changeSet generation                                                                                                                                                                                                                           
			let iNonZeroEntryCount = 0;                                                                                                                                                                                                                                 
			for (var count = 0; count < oTableModelData.length; count++) {                                                                                                                                                                                              
				let oTempObj = Object.assign({}, oTableModelData[count], oHeaderModelData);                                                                                                                                                                                
                                                                                                                                                                                                                                                               
				// If Local Currency amount not maintained - Do Not post the entry.                                                                                                                                                                                        
				if (!isNaN(oTempObj.AmountInLocalCurrency) && parseInt(oTempObj.AmountInLocalCurrency, [10]) !== 0 && oTempObj.AmountInLocalCurrency !==                                                                                                                   
					"") {                                                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
					// Deleting unwanted data                                                                                                                                                                                                                                 
					let aDeletePropertyList = ["ConsolidationRptgItemMdmText", "ConsolidationUnitDescription", "GLAccountMdmText", "TaxPTA",                                                                                                                                  
						"TaxClosingBalance", "PostingDateDisplay", "__metadata", "LineItem"                                                                                                                                                                                      
					];                                                                                                                                                                                                                                                        
					aDeletePropertyList.forEach(sProp => delete oTempObj[sProp]);                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					// Delete LineItem & recreate as per number of entries                                                                                                                                                                                                    
					iNonZeroEntryCount++;                                                                                                                                                                                                                                     
					oTempObj.LineItem = iNonZeroEntryCount.toString();                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					// Formatting date                                                                                                                                                                                                                                        
					oTempObj.PostingDate = oDateFormatter.format(new Date(oHeaderModelData.PostingDate));                                                                                                                                                                     
                                                                                                                                                                                                                                                               
					oOdataModel.create("/xEY1xSAV_C_Rec_PTA", oTempObj, {                                                                                                                                                                                                     
						groupId: "groupIdPostPTA"                                                                                                                                                                                                                                
					});                                                                                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			// Submit the batch requests                                                                                                                                                                                                                                
			oOdataModel.submitChanges({                                                                                                                                                                                                                                 
				groupId: "groupIdPostPTA",                                                                                                                                                                                                                                 
				success: function (oData, response) {                                                                                                                                                                                                                      
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					let oChangeResponses = oData.__batchResponses[0].__changeResponses;                                                                                                                                                                                       
					if (!oChangeResponses || oChangeResponses.length <= 0) {                                                                                                                                                                                                  
						return;                                                                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					// Find the text response                                                                                                                                                                                                                                 
					// let oOverAllResponse = JSON.parse(oChangeResponses[oChangeResponses.length - 1].headers["sap-message"]);                                                                                                                                               
					let oOverAllResponse = JSON.parse(oChangeResponses.find(item => item.headers["sap-message"]).headers["sap-message"]);                                                                                                                                     
                                                                                                                                                                                                                                                               
					let oChangeRespData = oChangeResponses[0].data;                                                                                                                                                                                                           
					let oDisplayFilterData = {                                                                                                                                                                                                                                
						DocumentNumber: oChangeRespData.DocumentNumber,                                                                                                                                                                                                          
						ConsolidationUnit: oChangeRespData.ConsolidationUnit,                                                                                                                                                                                                    
						FiscalYear: oChangeRespData.FiscalYear                                                                                                                                                                                                                   
					};                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					// Setting the document number to Configuration model - Used in Reconciliation controller to refresh table data after PTA entry creation.                                                                                                                 
					that.postPTAEntriesConfigModel.setProperty("/DocumentNumber", oChangeRespData.DocumentNumber);                                                                                                                                                            
                                                                                                                                                                                                                                                               
					//	If header response is available & is success                                                                                                                                                                                                           
					if (oOverAllResponse && oOverAllResponse.severity.toUpperCase() === "SUCCESS") {                                                                                                                                                                          
						MessageToast.show(oOverAllResponse.message);                                                                                                                                                                                                             
						that._setDynamicPageContent(oChangeRespData.DocumentNumber);                                                                                                                                                                                             
						that._setPTAEntriesToDisplayMode(oDisplayFilterData);                                                                                                                                                                                                    
					} else if (oOverAllResponse && oOverAllResponse.message) { // If header response is available but other than success.                                                                                                                                     
						MessageBox.error(oOverAllResponse.message);                                                                                                                                                                                                              
					}                                                                                                                                                                                                                                                         
					// If No response - default framework error to occur                                                                                                                                                                                                      
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onPressCancelBtnPostPTAEntries: function (oEvent) {                                                                                                                                                                                                          
			this._unsavedChangesWarning();                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangePostingPeriodPTAEntries: function (oEvent) {                                                                                                                                                                                                         
			// Editability & Error State handled in View ExpressionBinding                                                                                                                                                                                              
			// Reset value is done here.                                                                                                                                                                                                                                
			let oSrc = oEvent.getSource(),                                                                                                                                                                                                                              
				sValue = oSrc.getValue();                                                                                                                                                                                                                                  
			if (!sValue || parseInt(sValue, [10]) < 12) {                                                                                                                                                                                                               
				oSrc.setValue(this._iFetchedFiscalPeriod);                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            