sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast","sap/m/MessageBox","sap/ui/core/ListItem","sap/ui/core/format/NumberFormat","sap/ui/generic/app/+
navigation/service/NavigationHandler"],function(e,t,o,i,n,r,s,l,a,d){"use strict";const u="Local",c="Global";let T=[];return e.extend("ey.sap.fin.cs.effectivetaxrate.controller.MainReport",{formatter:o,onInit:function(){this.oRouter=this.getOwnerComponen+
t().getRouter();this.oRouter.getRoute("RouteMainReport").attachMatched(this._onRouteMatched,this);let e=new t;this.setModel(e,"viewConfigDataModel");this._fetchGlobalParameters()},_onRouteMatched:function(){this.getBusyDialog().close();this.getView().set+
Model(new t({results:[{key:"RGAAP",text:this.getI18nText("sBtnTextReportingGAAP")},{key:"SGAAP",text:this.getI18nText("sBtnTextStatutoryReporting")}]}),"modelReportingType")},_fetchGlobalParameters:function(){var e=this;var t={Default:true};var o=this.ge+
tOwnerComponent().getModel();o.callFunction("/GlobalParameter",{method:"GET",urlParameters:t,success:function(t){e.getView().getModel("viewConfigDataModel").setData({globalParameters:t});let o=e.getView().byId("idETRSmartFilterBar");if(!o.getCurrentVaria+
ntId()){e._setFilterBarParameters(t)}},error:function(t){s.error(e.getI18nText("errorReadingGlobalParameters"))}})},_setFilterBarParameters:function(e){let t=this.getView(),i=t.byId("idCurrency");if(e.LocalCurrencyType&&e.LocalCurrency){i.setSelectedKey(+
e.LocalCurrency)}else{i.setSelectedKey(e.GroupCurrency)}if(e.ConsolidationUnit){t.byId("idConsUnit").setSelectedKey(e.ConsolidationUnit);i.setVisible(true);this._fetchCurrencyData(true);this.fetchReconLedgerData()}if(e.FiscalYear){let o=new Date("06/06/"+
.concat(e.FiscalYear.toString()));t.byId("idFiscalYearFilter").setDateValue(o)}if(e.Intention){t.byId("idIntentionComboBox").setSelectedKey(e.Intention)}var n=[e.ConsolidationUnit,e.FiscalYear];this._fetchIntentionStatus(n);if(e.PeriodFrom){t.byId("idPer+
iodFromInput").setValue(o.convertStringToInt(e.PeriodFrom))}if(e.PeriodTo){t.byId("idPeriodToInput").setValue(o.convertStringToInt(e.PeriodTo))}if(e.ConsolidationUnit&&e.FiscalYear&&e.Intention&&e.PeriodTo){this._fetchValidTaxRates()}},getI18nText:functi+
on(e){return this.getResourceBundle().getText(e)},_fetchCurrencyData:function(e){var o=this.getView(),r=o.byId("idConsUnit").getSelectedKey(),s=new i("ConsolidationUnit",n.EQ,r),l=this.getModel(),a=this,d=o.byId("idCurrType"),u=o.byId("idCurrency");d.set+
Visible(true);u.setBusy(true);l.read("/xEY1xSAV_C_CurrLocalGroupVH",{method:"GET",filters:[s],success:function(o,i){u.setBusy(false);a.setModel(new t(o),"currLocalGroupVHModel");if(!e&&o.results.length>0){u.setSelectedKey(o.results[0].Currency)}},error:f+
unction(e){u.setBusy(false)}})},_fetchIntentionStatus:function(e){let o=this.getModel();let r=e[0],l=e[1],a="/xEY1xSAV_C_IntentionsStatus(p_bunit='"+r+"')/Set",d=new i("Gjahr",n.EQ,l),u=this,c=u.getView(),T=c.byId("idIntentionComboBox");this.getBusyDialo+
g().open();o.read(a,{method:"GET",sorters:[new sap.ui.model.Sorter("SerialNumber")],filters:[d],success:function(e,o){u.getBusyDialog().close();if(e.results.length===0){T.setSelectedKey("");T.setEnabled(false);s.error(u.getI18nText("IntentionNotYetOpen")+
+l);return}T.setEnabled(true);let i=u.getView().getModel("viewConfigDataModel").getData().globalParameters;T.setSelectedKey(i.Intention);T.setSelectedKey("");for(let t=0;t<e.results.length;t++){if(e.results[t].isSelected==="X"){T.setSelectedKey(e.results+
[t].Intention)}}if(T.getSelectedKey()===""){for(let t=0;t<e.results.length;t++){if(e.results[t].status==="Open"){T.setSelectedKey(e.results[t].Intention)}}}let n=new t(e);u.getView().setModel(n,"intentionVHModel");u._managePeriodFieldsEditability(false)}+
,error:function(e){u.getBusyDialog().close();s.error(u.getI18nText("errorFetchingIntentionStatus"))}})},_managePeriodFieldsEditability:function(e){let t=this.getView(),i=t.byId("idIntentionComboBox");if(!e){i.setSelectedKey(i.getSelectedKey())}let n=i.ge+
tSelectedItem(),r=n.getBindingContext("intentionVHModel").getObject();let s=t.byId("idPeriodToInput"),l=o.convertStringToInt(r.TaxIntention);if(l!==o.convertStringToInt(0)){this._manageIntentionStatus(r);s.setEditable(false);s.setValue(o.convertStringToI+
nt(r.PeriodTo))}else{this._managePerodicIntentionStatus(r.PeriodTo);s.setEditable(true);s.setValue(o.convertStringToInt(r.CurrOpenPeriod))}},_manageIntentionStatus:function(e){let t=this;if(e.status===this.getI18nText("YetToOpen")){t.getBusyDialog().clos+
e();s.error(this.getModel("i18n").getResourceBundle().getText("ThisIntentionNotYetOpen",[e.IntentDescription,e.Gjahr]));return}else{return}},_managePerodicIntentionStatus:function(e){let t=this.getView().byId("idIntentionComboBox").getSelectedItem().getB+
indingContext("intentionVHModel").getObject(),o=parseInt(t.CurrOpenPeriod,[10]);if(e>o){this.getBusyDialog().close();s.error(this.getModel("i18n").getResourceBundle().getText("errorPeriodnotopen",[e,o]));return}else{return}},fetchReconLedgerData:function+
(){let e=this.getModel();let t=e.createKey("/xEY1xSAV_C_Recon_Ledger",{bunit:this.byId("idConsUnit").getSelectedKey()});let o=this;e.read(t,{method:"GET",success:function(e,t){var i=o.getModel("viewConfigDataModel");i.getData().reconData=e;i.refresh()},e+
rror:function(e){if(parseInt(e.statusCode,[10])!==404){r.show(o.getI18nText("reconServiceCallError"))}}})},_fetchValidTaxRates:function(){let e=this,t=this.getView(),o=t.byId("idConsUnit").getSelectedKey(),i=t.byId("idPeriodToInput").getValue(),n=t.byId(+
"idFiscalYearFilter").getDateValue(),l=this.getModel();if(!o||!i||!n){return}let a=n.getFullYear();if(!o||!i||!n||!a){return}let d="/xEY1xSAV_C_Get_Tax_Rate(p_toperiod='"+i+"',p_ryear='"+a+"',p_rbunit='"+o+"')/Set";l.read(d,{method:"GET",success:function+
(t){if(t.results.length<1){s.warning(e.getI18nText("warningTaxRatesNotMaintained"))}},error:function(t){r.show(e.getI18nText("warningFetchingTaxRates"))}})},_getIntentionForManageTier:function(){let e=this.getView().byId("idPeriodToInput").getValue(),t;i+
f(parseInt(e,[10])<=3){t="Q1"}else if(parseInt(e,[10])>3&&parseInt(e,[10])<=6){t="Q2"}else if(parseInt(e,[10])>6&&parseInt(e,[10])<=9){t="Q3"}else{t="TXP"}return t},_fetchTiers:function(){let e=this,o=this.getView(),n=o.byId("idConsUnit").getSelectedItem+
().getBindingContext().getObject().Country,l=o.byId("idFiscalYearFilter").getDateValue().getFullYear(),a=o.byId("idIntentionComboBox").getSelectedKey(),d=this.getModel();if(a==="PER"){a=this._getIntentionForManageTier()}if(!n||!l||!a){return}let u="/xEY1+
xSAV_C_TIERS";d.read(u,{method:"GET",filters:[new i("CountryKey","EQ",n),new i("FiscalYear","EQ",l),new i("Intention","EQ",a)],success:function(o){if(o.results.length<1){s.warning(e.getI18nText("errorTiersNotMaintained"))}e.getView().setModel(new t(o),"M+
anageTiersModel")},error:function(t){r.show(e.getI18nText("warningFetchingTiers"))}})},_EmptyTableCall:function(){let e=this.getView();e.byId("idTableITDCTR").getModel("ITDCTRTableModel").setData([]);e.byId("idITDCTRFooter").getModel("ITDCTRFooterTableMo+
del").setData([]);e.byId("idTableSummaryTEB").getModel("SummaryTEBTableModel").setData([]);e.byId("idTableDDCTRTD").getModel("DDCTRTDTableModel").setData([]);e.byId("idDDCTRTDFooter").getModel("DDCTRFooterTableModel").setData([]);e.byId("idTableBDNDTCPD"+
).getModel("BDNDTCPDTableModel").setData([]);e.byId("idBDNDTCPDFooter").getModel("BDNDTCPDFooterTableModel").setData([]);e.byId("idTablePTA").getModel("PTATableModel").setData([]);e.byId("idPTAFooter").getModel("PTAFooterTableModel").setData([]);e.byId("+
idTableCTRETD").getModel("CTRETDTableModel").setData([]);e.byId("idCTRETDFooter").getModel("CTRETDFooterTableModel").setData([])},_fetchAllTabsData:function(){let e=this.getView(),t=e.getModel("viewConfigDataModel").getData();if(!t.globalParameters||!t.g+
lobalParameters.ConsolidationChartofAccounts||!t.globalParameters.ConsolidationGroup){s.error(this.getI18nText("errorMaintainGlobalParameter"));return}let o=e.byId("idConsUnit"),r=o.getSelectedKey(),l=e.byId("idCurrency"),a=l.getSelectedKey(),d=l.getSele+
ctedItem().getProperty("additionalText"),u=o.getSelectedItem().getBindingContext().getObject().Country,c=e.byId("idIntentionComboBox").getSelectedKey(),g=e.byId("idFiscalYearFilter"),p=g.getDateValue().getFullYear(),_=e.byId("idPeriodToInput"),h=parseInt+
(_.getValue(),[10]),f=e.byId("idPeriodFromInput"),C=parseInt(f.getValue(),[10]),y="X";if(e.byId("idIntentionComboBox").getEnabled()===false){s.error(this.getI18nText("IntentionNotYetOpen")+p);if(T.length>0){this._EmptyTableCall()}return}let I=e.byId("idI+
ntentionComboBox").getSelectedItem().getBindingContext("intentionVHModel"),b=I.getObject(),D=parseInt(b.CurrOpenPeriod,[10]);if(b.status===this.getI18nText("YetToOpen")){this.getBusyDialog().close();s.error(this.getModel("i18n").getResourceBundle().getTe+
xt("ThisIntentionNotYetOpen",[b.IntentDescription,b.Gjahr]));if(T.length>0){this._EmptyTableCall()}return}if(h>D){this.getBusyDialog().close();s.error(this.getModel("i18n").getResourceBundle().getText("errorPeriodnotopen",[h,D]));if(T.length>0){this._Emp+
tyTableCall()}return}let S=e.byId("idIntentionComboBox").getSelectedItem()?parseInt(e.byId("idIntentionComboBox").getSelectedItem().getBindingContext("intentionVHModel").getObject().TaxIntention,[10]):t.globalParameters.TaxIntention,m=S>100?S:"",M=e.byId+
("idIntentionComboBox").getSelectedItem()?e.byId("idIntentionComboBox").getSelectedItem().getBindingContext("intentionVHModel").getObject().TaxIntention:t.globalParameters.TaxIntention,w=this.getView().byId("idFragContent--idETRReconSegmentedBtn"),R=this+
.getView().byId("idFragSnapContent--idETRReconSegmentedBtn"),x;if(c==="PER"){c=this._getIntentionForManageTier()}if(w.getSelectedKey()===R.getSelectedKey()){x=w.getSelectedKey()}else{x="RGAAP"}let E=[new i("ConsolidationUnit",n.EQ,r),new i("Consolidation+
ChartofAccounts",n.EQ,t.globalParameters.ConsolidationChartofAccounts),new i("MainCurrency",n.EQ,a)],P=[new i("CurrencyType",n.EQ,d),new i("ReportingType",n.EQ,x)],F=new i({filters:[...E],and:true}),B=new i({filters:[...E,...P],and:true});T=[];let V="/xE+
Y1xSAV_C_ETR_SUM_ITDCTR(p_rbunit='"+r+"',p_ryear='"+p+"',p_fromperiod='"+C+"',p_toperiod='"+h+"',p_switch='"+y+"',p_taxintention='"+m+"',p_currtype='"+d+"',p_intention='"+c+"')/Set";let A={p_cntry:u,p_ryear:p,p_fromperiod:C,p_toperiod:h,p_switch:y,p_taxi+
ntention:m,p_intention:c,p_intentionPYA:M,p_rbunit:r,p_currtype:d,oMandFilters:F,oAllFilters:B};this._serviceCallITDCTR(V,A)},_serviceCallITDCTR:function(e,o){let i=this.getModel(),n=this.getView().byId("idTableITDCTR"),s=this.getView().byId("idITDCTRFoo+
ter"),l=this.getView().byId("idTableSummaryTEB"),a=this;n.setBusy(true);s.setBusy(true);l.setBusy(true);i.read(e,{method:"GET",success:function(e,i){n.setBusy(false);n.setModel(new t(e),"ITDCTRTableModel");n.setVisibleRowCount(e.results.length);T.push(n.+
getModel("ITDCTRTableModel"));a._fetchRemainingSections(o)},error:function(e){n.setBusy(false);r.show(a.getI18nText("ITDCTRServiceCallError"))}})},_fetchRemainingSections:function(e){let t="/xEY1xSAV_C_ETR_SUM_ITDCTRTotal(p_cntry='"+e.p_cntry+"',p_ryear=+
'"+e.p_ryear+"',p_intention='"+e.p_intention+"')/Set";this._serviceCallITDCTRFooter(t,e.oMandFilters);let o="/xEY1xSAV_C_ETR_SUM_Overview(p_cntry='"+e.p_cntry+"',p_ryear='"+e.p_ryear+"',p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_sw+
itch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_intention='"+e.p_intention+"',p_rbunit='"+e.p_rbunit+"')/Set";this._serviceCallSummaryTEB(o,e.oAllFilters);let i="/xEY1xSAV_C_ETR_SUM_DDCTRTD(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.+
p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.p_intentionPYA+"')/Set";this._serviceCallSummaryDDCTRTD(i,e.oAllFilters);let n="/xEY1xSAV_C_ETR_SUM_DDCTRTota+
l(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.p_intentionPYA+"')/Set";this._serviceCallSummaryDDCTRTDFo+
oter(n,e.oAllFilters);let r="/xEY1xSAV_C_ETR_BDTPD_BDNDTPD(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.+
p_intentionPYA+"')/Set";this._serviceCallBDNDTCPD(r,e.oAllFilters);let s="/xEY1xSAV_C_ETR_BDTPD_BDNDTotal(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+
+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.p_intentionPYA+"')/Set";this._serviceCallBDNDTCPDFooter(s,e.oAllFilters);let l="/xEY1xSAV_C_ETR_PTA_Mvmnt(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e+
.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.p_intentionPYA+"')/Set";this._serviceCallPTA(l,e.oAllFilters);let a="/xEY1xSAV_C_ETR_PTA_Total(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p+
_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_taxintention+"',p_rbunit='"+e.p_rbunit+"',p_intention='"+e.p_intentionPYA+"')/Set";this._serviceCallPTAFooter(a,e.oAllFilters);let d="/xEY1xSAV_C_ETR_CTRTDCB(p_fromperiod='"+e.p_fromp+
eriod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_intentionPYA+"',p_rbunit='"+e.p_rbunit+"')/Set";this._serviceCallCTRETD(d,e.oAllFilters);let u="/xEY1xSAV_C_ETR_CTRTDCBTotal(p_fromperiod='"+e.+
p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_intentionPYA+"',p_rbunit='"+e.p_rbunit+"')/Set";this._serviceCallCTRETDFooter(u,e.oAllFilters);let c="/xEY1xSAV_C_ETR_RS_PYADTRPL(p_from+
period='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_intentionPYA+"',p_rbunit='"+e.p_rbunit+"')/Set";this._serviceCallPYADTRF(c,e.oAllFilters);let T="/xEY1xSAV_C_ETR_RS_PYATotal+
(p_fromperiod='"+e.p_fromperiod+"',p_toperiod='"+e.p_toperiod+"',p_ryear='"+e.p_ryear+"',p_switch='"+e.p_switch+"',p_taxintention='"+e.p_intentionPYA+"',p_rbunit='"+e.p_rbunit+"')/Set";this._serviceCallPYADTRFFooter(T,e.oAllFilters)},_serviceCallITDCTRFo+
oter:function(e,o){let i=this.getModel(),n=this.getView().byId("idITDCTRFooter"),s=this;i.read(e,{method:"GET",filters:[o],success:function(e,o){if(e.results.length===0||s.getView().getModel("ManageTiersModel").getData().results.length===0){e.results=[{P+
ercentage:"0.00",Tax:"0.00"}]}n.setBusy(false);n.setModel(new t(e),"ITDCTRFooterTableModel");T.push(n.getModel("ITDCTRFooterTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("ITDCTRServiceCallError"))}})},_serviceCallSummaryTEB:funct+
ion(e,o){let i=this.getModel(),n=this.getView().byId("idTableSummaryTEB"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("SerialNo")],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"SummaryTEBTableModel");n.setVisi+
bleRowCount(e.results.length);T.push(n.getModel("SummaryTEBTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("ITDCTRServiceCallError"))}})},_serviceCallSummaryDDCTRTD:function(e,o){let i=this.getModel(),n=this.getView().byId("idTable+
DDCTRTD"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("GLAccount")],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"DDCTRTDTableModel");n.setVisibleRowCount(e.results.length);T.push(n.getModel("DDCTRTDTableModel+
"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("DDCTRTDServiceCallError"))}})},_serviceCallSummaryDDCTRTDFooter:function(e,o){let i=this.getModel(),n=this.getView().byId("idDDCTRTDFooter"),s=this;i.read(e,{method:"GET",filters:[o],success:f+
unction(e,o){n.setBusy(false);n.setModel(new t(e),"DDCTRFooterTableModel");T.push(n.getModel("DDCTRFooterTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("DDCTRFooterServiceCallError"))}})},_serviceCallBDNDTCPD:function(e,o){let i=t+
his.getModel(),n=this.getView().byId("idTableBDNDTCPD"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("GLAccount")],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"BDNDTCPDTableModel");n.setVisibleRowCount(e.resul+
ts.length);T.push(n.getModel("BDNDTCPDTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("BDNDTCPDServiceCallError"))}})},_serviceCallBDNDTCPDFooter:function(e,o){let i=this.getModel(),n=this.getView().byId("idBDNDTCPDFooter"),s=this;+
i.read(e,{method:"GET",filters:[o],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"BDNDTCPDFooterTableModel");T.push(n.getModel("BDNDTCPDFooterTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("BDNDTCPDFooterServiceCallEr+
ror"))}})},_serviceCallPTA:function(e,o){let i=this.getModel(),n=this.getView().byId("idTablePTA"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("GLAccount")],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"PTATab+
leModel");n.setVisibleRowCount(e.results.length);T.push(n.getModel("PTATableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("PTAServiceCallError"))}})},_serviceCallPTAFooter:function(e,o){let i=this.getModel(),n=this.getView().byId("idP+
TAFooter"),s=this;i.read(e,{method:"GET",filters:[o],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"PTAFooterTableModel");T.push(n.getModel("PTAFooterTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("PTAFooterServiceCal+
lError"))}})},_serviceCallPYADTRF:function(e,o){let i=this.getModel(),n=this.getView().byId("idTablePYADTRF"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("GLAccount")],success:function(e,o){n.setBusy(false);n.setModel(new t+
(e),"PYADTRFTableModel");n.setVisibleRowCount(e.results.length);T.push(n.getModel("PYADTRFTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("DTRFPYAServiceCallError"))}})},_serviceCallPYADTRFFooter:function(e,o){let i=this.getModel()+
,n=this.getView().byId("idPYADTRFFooter"),s=this;i.read(e,{method:"GET",filters:[o],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"PYADTRFFooterTableModel");T.push(n.getModel("PYADTRFFooterTableModel"))},error:function(e){n.setBusy(false);r.+
show(s.getI18nText("DTRFPYAFooterServiceCallError"))}})},_serviceCallCTRETD:function(e,o){let i=this.getModel(),n=this.getView().byId("idTableCTRETD"),s=this;i.read(e,{method:"GET",filters:[o],sorters:[new sap.ui.model.Sorter("GLAccount")],success:functi+
on(e,o){n.setBusy(false);n.setModel(new t(e),"CTRETDTableModel");n.setVisibleRowCount(e.results.length);T.push(n.getModel("CTRETDTableModel"))},error:function(e){n.setBusy(false);r.show(s.getI18nText("CTRETDServiceCallError"))}})},_serviceCallCTRETDFoote+
r:function(e,o){let i=this.getModel(),n=this.getView().byId("idCTRETDFooter"),s=this;i.read(e,{method:"GET",filters:[o],success:function(e,o){n.setBusy(false);n.setModel(new t(e),"CTRETDFooterTableModel");T.push(n.getModel("CTRETDFooterTableModel"))},err+
or:function(e){n.setBusy(false);r.show(s.getI18nText("CTRETDFooterServiceCallError"))}})},onSearchButtonPressed:function(e){this._fetchAllTabsData();this._fetchTiers()},onChangeDatePickerFilter:function(e){let t=e.getSource(),o=this.getModel("viewConfigD+
ataModel").getData(),i=this.getView().byId("idConsUnit").getProperty("selectedKey");if(e.getParameter("valid")){t.setValueState("None");let e=t.getDateValue().getFullYear(),o=[i,e];this._fetchIntentionStatus(o)}else{t.setValueState("Error")}this._fetchVa+
lidTaxRates()},onConsUnitChange:function(e){this._fetchCurrencyData(false);this.fetchReconLedgerData();let t=e.getSource().getSelectedKey(),o=[t,this.getView().byId("idFiscalYearFilter").getDateValue().getFullYear()];this._fetchIntentionStatus(o);this._f+
etchValidTaxRates()},onChangeIntentionComboBox:function(e){let t=this.getView(),o=t.byId("idIntentionComboBox"),i=o.getSelectedItem();if(!i){o.setSelectedItem("");return}this._managePeriodFieldsEditability(true);this._fetchValidTaxRates()},onLiveChangePe+
riodTo:function(){let e=this.getView().byId("idPeriodToInput");let t=parseInt(this.getView().byId("idPeriodFromInput").getValue(),[10]);let o=parseInt(e.getValue(),[10]);e.setValueState("None");if(o<t){e.setValueState("Error");e.setValueStateText(this.ge+
tI18nText("periodToLessThanPeriodFromErrorMsg"));return}else if(o>"012"){e.setValueState("Error");e.setValueStateText(this.getI18nText("periodToGreaterThanLastPeriod"));return}else{this._managePerodicIntentionStatus(o)}},onChangeButtonReportingType:funct+
ion(e){let t=this.getView().byId("idFragContent--idETRReconSegmentedBtn"),o=this.getView().byId("idFragSnapContent--idETRReconSegmentedBtn");t.setSelectedKey(e.getSource().getSelectedKey());o.setSelectedKey(e.getSource().getSelectedKey());let i=this.getV+
iew().byId("idETRSmartFilterBar");if(i.validateMandatoryFields()){i.fireSearch()}}})});                                                                                                                                                                        