sap.ui.define([                                                                                                                                                                                                                                                
	"./BaseController",                                                                                                                                                                                                                                           
	"sap/ui/model/json/JSONModel",                                                                                                                                                                                                                                
	"../model/formatter",                                                                                                                                                                                                                                         
	"sap/ui/model/Filter",                                                                                                                                                                                                                                        
	"sap/ui/model/FilterOperator",                                                                                                                                                                                                                                
	"sap/m/MessageToast",                                                                                                                                                                                                                                         
	"sap/m/MessageBox",                                                                                                                                                                                                                                           
	"sap/ui/core/ListItem",                                                                                                                                                                                                                                       
	"sap/ui/generic/app/navigation/service/NavigationHandler"                                                                                                                                                                                                     
], function (BaseController, JSONModel, formatter, Filter, FilterOperator, MessageToast, MessageBox, ListItem, NavigationHandler) {                                                                                                                            
	"use strict";                                                                                                                                                                                                                                                 
	let aGlblArr = [];                                                                                                                                                                                                                                            
	return BaseController.extend("ey.sap.fin.cs.hierarchyReportDTRF.controller.hierarchydtrf", {                                                                                                                                                                  
		formatter: formatter,                                                                                                                                                                                                                                        
		onInit: function () {                                                                                                                                                                                                                                        
			this.oRouter = this.getOwnerComponent().getRouter();                                                                                                                                                                                                        
			this.oRouter.getRoute("Routehierarchy").attachMatched(this._onRouteMatched, this);                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			//local model which will contain recon amount data                                                                                                                                                                                                          
			let oDtrfDataModel = new JSONModel();                                                                                                                                                                                                                       
			this.setModel(oDtrfDataModel, "viewConfigDataModel");                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			//local model for hier types - gl Acc and  Fs item                                                                                                                                                                                                          
			let oHierVHData = [{                                                                                                                                                                                                                                        
				name: this.getI18nText("FSItemText"),                                                                                                                                                                                                                      
				key: "CS15"                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			}, {                                                                                                                                                                                                                                                        
				name: this.getI18nText("GLAccVHText"),                                                                                                                                                                                                                     
				key: "0109"                                                                                                                                                                                                                                                
			}]                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			var oModel = new JSONModel();                                                                                                                                                                                                                               
			this.setModel(oModel, "HierDatModel");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			var oModelGL = new JSONModel();                                                                                                                                                                                                                             
			this.setModel(oModelGL, "HierDatModelGL");                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			let oHierVHModel = new JSONModel(oHierVHData);                                                                                                                                                                                                              
			this.setModel(oHierVHModel, "hierVHModel");                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			//column model for hierarchyID value ( for value help dialog)                                                                                                                                                                                               
			let oColumnVHHierIdData = {                                                                                                                                                                                                                                 
					"cols": [{                                                                                                                                                                                                                                                
						"label": this.getI18nText("labelHierId"),                                                                                                                                                                                                                
						"template": "HierarchyId",                                                                                                                                                                                                                               
						"width": "6%",                                                                                                                                                                                                                                           
						"resizable": "false"                                                                                                                                                                                                                                     
					}, {                                                                                                                                                                                                                                                      
						"label": this.getI18nText("labelHierIdDes"),                                                                                                                                                                                                             
						"template": "HierarchyText",                                                                                                                                                                                                                             
						"width": "13%",                                                                                                                                                                                                                                          
						"resizable": "false"                                                                                                                                                                                                                                     
					}]                                                                                                                                                                                                                                                        
				},                                                                                                                                                                                                                                                         
				oColVHModel = new JSONModel(oColumnVHHierIdData);                                                                                                                                                                                                          
			this.setModel(oColVHModel, "VHColumnModel");                                                                                                                                                                                                                
			this._fetchGlobalParameters();                                                                                                                                                                                                                              
			this._fetchAdjustmentReasons();                                                                                                                                                                                                                             
			// Defaulting Reporting Type Model                                                                                                                                                                                                                          
			this.getView().setModel(new JSONModel({                                                                                                                                                                                                                     
				results: [{                                                                                                                                                                                                                                                
					key: "RGAAP",                                                                                                                                                                                                                                             
					text: this.getI18nText("sBtnTextReportingGAAP")                                                                                                                                                                                                           
				}, {                                                                                                                                                                                                                                                       
					key: "SGAAP",                                                                                                                                                                                                                                             
					text: this.getI18nText("sBtnTextStatutoryReporting")                                                                                                                                                                                                      
				}]                                                                                                                                                                                                                                                         
			}), "modelReportingType");                                                                                                                                                                                                                                  
			//initially setting up hier type as FS Item                                                                                                                                                                                                                 
			this.getView().byId("idHierType").setSelectedKey('CS15');                                                                                                                                                                                                   
			//based on the above selected hier typ initially calling th value help for hier ids                                                                                                                                                                         
			this._fetchValueHelpHierarchyTxt(this.getView().byId("idHierType").getSelectedKey());                                                                                                                                                                       
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* internal methods  -PRIVATE                                  */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		_onRouteMatched: function () {                                                                                                                                                                                                                               
			this.getBusyDialog().close();                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//value help for hier ID based on hier type selected FS item or GL acc                                                                                                                                                                                       
		_fetchValueHelpHierarchyTxt: function (sKey) {                                                                                                                                                                                                               
			let oServiceModel = this.getOwnerComponent().getModel("oManageHierModel"),                                                                                                                                                                                  
				that = this,                                                                                                                                                                                                                                               
				oFilter = new Filter({                                                                                                                                                                                                                                     
					filters: [new Filter("HierarchyCategory", FilterOperator.EQ, sKey),                                                                                                                                                                                       
						new Filter("VersionStatus", FilterOperator.EQ, 'A')                                                                                                                                                                                                      
					],                                                                                                                                                                                                                                                        
					and: true                                                                                                                                                                                                                                                 
				}),                                                                                                                                                                                                                                                        
				aFilter = oFilter;                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			oServiceModel.read("/HierarchyVersionSet", {                                                                                                                                                                                                                
				method: "GET",                                                                                                                                                                                                                                             
				filters: [aFilter],                                                                                                                                                                                                                                        
				success: function (oData) {                                                                                                                                                                                                                                
					let oHierCatTextModel = new JSONModel(oData.results);                                                                                                                                                                                                     
					that.setModel(oHierCatTextModel, "hierarCatModel");                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				error: function (oError) {                                                                                                                                                                                                                                 
					MessageBox.error(that.getI18nText("errorFetchingHierCatTxtData"));                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		_fetchAdjustmentReasons: function () {                                                                                                                                                                                                                       
			let oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                           
			let sServiceURL = "/xEY1xSAV_C_Recon_Adj_Reason";                                                                                                                                                                                                           
			let that = this;                                                                                                                                                                                                                                            
			oModel.read(sServiceURL, {                                                                                                                                                                                                                                  
				method: "GET",                                                                                                                                                                                                                                             
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					var oReconModel = that.getModel("viewConfigDataModel");                                                                                                                                                                                                   
					oReconModel.getData().adjustmentReason = oData.results;                                                                                                                                                                                                   
					oReconModel.refresh();                                                                                                                                                                                                                                    
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					if (parseInt(oError.statusCode, [10]) !== 404) {                                                                                                                                                                                                          
						MessageToast.show(that.getI18nText("adjustmentReasonsServiceCallError"));                                                                                                                                                                                
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		//filtering the table inside hier id value help based on filters provided by the user                                                                                                                                                                        
		_filterVHTable: function (oFilter) {                                                                                                                                                                                                                         
			let that = this;                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			this._oHierIdVHDialog.getTableAsync().then(function (oTable) {                                                                                                                                                                                              
				if (oFilter.aFilters.length === 0) {                                                                                                                                                                                                                       
					oTable.getBinding("rows").filter(oFilter);                                                                                                                                                                                                                
					oTable.getModel().refresh(true);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				} else {                                                                                                                                                                                                                                                   
					oTable.getBinding("rows").filter(oFilter);                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
				that._oHierIdVHDialog.update();                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		//fetch recon amount values to integrate with corresponding FS item in hierarchy                                                                                                                                                                             
		_fetchDTRFData: function () {                                                                                                                                                                                                                                
			let oReconServiceModel = this.getOwnerComponent().getModel(),                                                                                                                                                                                               
				that = this,                                                                                                                                                                                                                                               
				oView = this.getView(),                                                                                                                                                                                                                                    
				globalParameterData = oView.getModel("viewConfigDataModel").getData();                                                                                                                                                                                     
			if (!globalParameterData.globalParameters || !globalParameterData.globalParameters.ConsolidationChartofAccounts || !                                                                                                                                        
				globalParameterData.globalParameters.ConsolidationGroup) {                                                                                                                                                                                                 
				MessageBox.error(this.getI18nText("errorMaintainGlobalParameter"));                                                                                                                                                                                        
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			let idConsUnit = oView.byId("idConsUnit"),                                                                                                                                                                                                                  
				oConsUnit = idConsUnit.getSelectedKey(),                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
				// Currency Filter Data                                                                                                                                                                                                                                    
				idCurrType = oView.byId("idCurrency"),                                                                                                                                                                                                                     
				sCurrencyUnit = idCurrType.getSelectedKey(),                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
				// Fiscal Year Filter Data                                                                                                                                                                                                                                 
				oFiscalYear = oView.byId("idFiscalYearFilter"),                                                                                                                                                                                                            
				sFiscalYearVal = oFiscalYear.getDateValue().getFullYear(),                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
				// PeriodFrom & PeriodTo Filter Data                                                                                                                                                                                                                       
				oPeriodFrom = oView.byId("idPeriodFromInput"),                                                                                                                                                                                                             
				oPeriodTo = oView.byId("idPeriodToInput"),                                                                                                                                                                                                                 
				paramFromYb = parseInt(oPeriodFrom.getValue(), [10]),                                                                                                                                                                                                      
				paramToYb = parseInt(oPeriodTo.getValue(), [10]),                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				// Intention Filter Data                                                                                                                                                                                                                                   
				oIntentionBinding = oView.byId("idIntentionComboBox").getSelectedItem().getBindingContext("intentionVHModel"),                                                                                                                                             
				iTaxIntentionVal = parseInt(oIntentionBinding.getObject().TaxIntention, [10]),                                                                                                                                                                             
				iIntentn = oIntentionBinding.getObject().TaxIntention,                                                                                                                                                                                                     
				intentionValue = iTaxIntentionVal > 100 ? iTaxIntentionVal : "",                                                                                                                                                                                           
				sFSReportingType = this.getView().byId("idFSItmSegmentedBtn").getSelectedKey(),                                                                                                                                                                            
				sGLReportingType = this.getView().byId("idGlAccSegmentedBtn").getSelectedKey(),                                                                                                                                                                            
				sReportingType = this.getView().byId("idFSitmSmartTable").getVisible() ? sFSReportingType : sGLReportingType,                                                                                                                                              
				// oIntentionBinding = oView.byId("idIntentionComboBox").getSelectedItem().getBindingContext("intentionVHModel"),                                                                                                                                          
				// iSpecialPeriodVal = parseInt(oIntentionBinding.getObject().SpecialPeriod, [10]),                                                                                                                                                                        
				// intentionValue = iSpecialPeriodVal > 12 ? iSpecialPeriodVal : "",                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
				// Other Variable declaration                                                                                                                                                                                                                              
				oMandFilters, oUserFilters, oFilters;                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			oMandFilters = new Filter({                                                                                                                                                                                                                                 
				filters: [new Filter("ConsolidationUnit", FilterOperator.EQ, oConsUnit),                                                                                                                                                                                   
					//	new Filter("ChartOfAccounts", FilterOperator.EQ, "CANA"),                                                                                                                                                                                              
					new Filter("ConsolidationChartofAccounts", FilterOperator.EQ, globalParameterData.globalParameters.ConsolidationChartofAccounts),                                                                                                                         
					new Filter("MainCurrency", FilterOperator.EQ, sCurrencyUnit),                                                                                                                                                                                             
					new Filter("ReportingType", FilterOperator.EQ, sReportingType)                                                                                                                                                                                            
				],                                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			});                                                                                                                                                                                                                                                         
			oFilters = oMandFilters;                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			// If value < 0, then take 0	-----	If value > 12 then take 12&nbsp;                                                                                                                                                                                         
			paramFromYb = paramFromYb ? (paramFromYb < 0 ? 0 : (paramFromYb > 12 ? 12 : paramFromYb)) : 1;                                                                                                                                                              
			paramToYb = paramToYb ? (paramToYb < 0 ? 0 : (paramToYb > 12 ? 12 : paramToYb)) : 12;                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			let sBindingPath = "/xEY1xSAV_C_DeferredTaxRollFrwd(p_rbunit='" + oConsUnit + "',p_toperiod='" + paramToYb +                                                                                                                                                
				"',p_ryear='" + sFiscalYearVal + "',p_taxintention='" + intentionValue + "')/Results";                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			oReconServiceModel.read(sBindingPath, {                                                                                                                                                                                                                     
				filters: [oFilters],                                                                                                                                                                                                                                       
				method: "GET",                                                                                                                                                                                                                                             
				success: function (oData) {                                                                                                                                                                                                                                
					let oDTRFModel = new JSONModel(oData.results);                                                                                                                                                                                                            
					that.setModel(oDTRFModel, "oDTRFModel");                                                                                                                                                                                                                  
					//fetch tree data and form tree                                                                                                                                                                                                                           
					that._fetchTreeData();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				error: function (oError) {                                                                                                                                                                                                                                 
					MessageBox.error(that.getI18nText("errorFetchingDTRF"));                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//fetch hier data- function call 1                                                                                                                                                                                                                           
		_fetchTreeData: function () {                                                                                                                                                                                                                                
			let oServiceModel = this.getOwnerComponent().getModel("oManageHierModel"),                                                                                                                                                                                  
				that = this,                                                                                                                                                                                                                                               
				oView = this.getView(),                                                                                                                                                                                                                                    
				sHierId = oView.byId("idHierCatTextInpt").getSelectedKey(),                                                                                                                                                                                                
				sHierType = oView.byId("idHierType").getSelectedKey(),                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
				oFilters = new Filter({                                                                                                                                                                                                                                    
					filters: [new Filter("HierarchyCategory", FilterOperator.EQ, sHierType),                                                                                                                                                                                  
						new Filter("HierarchyId", FilterOperator.EQ, sHierId)                                                                                                                                                                                                    
					],                                                                                                                                                                                                                                                        
					and: true                                                                                                                                                                                                                                                 
				});                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			//call to get only the  version ID for a particular hier id falling under a hier type                                                                                                                                                                       
			oServiceModel.read("/HierarchyVersionSet", {                                                                                                                                                                                                                
				filters: [oFilters],                                                                                                                                                                                                                                       
				method: "GET",                                                                                                                                                                                                                                             
				success: function (oData) {                                                                                                                                                                                                                                
					that._fetchInitialHierarchy(oData.results[0].VersionId);                                                                                                                                                                                                  
				},                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				error: function (oError) {                                                                                                                                                                                                                                 
					MessageBox.error(that.getI18nText("errorFetchingHierData"));                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//fetch root node and its main childs that is till level 1 using version id and initialize amount fields&nbsp;                                                                                                                                               
		_fetchInitialHierarchy: function (sVersionId) {                                                                                                                                                                                                              
			let oServiceModel = this.getOwnerComponent().getModel("oManageHierModel"),                                                                                                                                                                                  
				oFilter = new Filter("NodeLevel", FilterOperator.LE, 1),                                                                                                                                                                                                   
				sKey = this.getView().byId("idHierType").getSelectedKey(),                                                                                                                                                                                                 
				that = this;                                                                                                                                                                                                                                               
			oServiceModel.read("/HierarchyVersionSet('" + sVersionId + "')/Nodes", {                                                                                                                                                                                    
				filters: [oFilter],                                                                                                                                                                                                                                        
				method: "GET",                                                                                                                                                                                                                                             
				success: async function (oData) {                                                                                                                                                                                                                          
					for (let i = 0; i < oData.results.length; i++) {                                                                                                                                                                                                          
						oData.results[i].Covered = '';                                                                                                                                                                                                                           
						oData.results[i].PlOpeningBalance = 0;                                                                                                                                                                                                                   
						oData.results[i].EqOpeningBalance = 0;                                                                                                                                                                                                                   
						oData.results[i].OpeningBalanceDTADTL = 0;                                                                                                                                                                                                               
						oData.results[i].PlYearBalance = 0;                                                                                                                                                                                                                      
						oData.results[i].EqYearBalance = 0;                                                                                                                                                                                                                      
						oData.results[i].OPlYearBalance = 0;                                                                                                                                                                                                                     
						oData.results[i].OEqYearBalance = 0;                                                                                                                                                                                                                     
						oData.results[i].CurrentYearMvmnt = 0;                                                                                                                                                                                                                   
						oData.results[i].PlClosingBalance = 0;                                                                                                                                                                                                                   
						oData.results[i].EqClosingBalance = 0;                                                                                                                                                                                                                   
						oData.results[i].ClosingBalanceDTADTL = 0;                                                                                                                                                                                                               
						oData.results[i].CTAPl = 0;                                                                                                                                                                                                                              
						oData.results[i].CTAEq = 0;                                                                                                                                                                                                                              
						oData.results[i].CTA = 0;                                                                                                                                                                                                                                
						oData.results[i].PYAPl = 0;                                                                                                                                                                                                                              
						oData.results[i].PYAEq = 0;                                                                                                                                                                                                                              
						oData.results[i].PYAOpl = 0;                                                                                                                                                                                                                             
						oData.results[i].PYAOeq = 0;                                                                                                                                                                                                                             
						oData.results[i].PYA = 0;                                                                                                                                                                                                                                
						oData.results[i].TRCPl = 0;                                                                                                                                                                                                                              
						oData.results[i].TRCEq = 0;                                                                                                                                                                                                                              
						oData.results[i].TRC = 0;                                                                                                                                                                                                                                
						oData.results[i].MainCurrency = '';                                                                                                                                                                                                                      
						aGlblArr.push(oData.results[i]);                                                                                                                                                                                                                         
						if (oData.results[i].NodeParentId) {                                                                                                                                                                                                                     
							//pause the execution at this line of code till 1st element of the loop is fully resolved and so on....                                                                                                                                                 
							await that.__recCallHierarchy(oData.results[i].NodeId, oServiceModel, that, sVersionId);                                                                                                                                                                
						}                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
					if (sKey === 'CS15') {                                                                                                                                                                                                                                    
						that._calculateAmountFSItem(aGlblArr);                                                                                                                                                                                                                   
					} else {                                                                                                                                                                                                                                                  
						that._calculateAmountGLAcc(aGlblArr);                                                                                                                                                                                                                    
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					that.getView().byId("idTreeHierFSItem").setBusy(false);                                                                                                                                                                                                   
					that.getView().byId("idTreeHierGLAcc").setBusy(false);                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				error: function (oError) {                                                                                                                                                                                                                                 
					MessageBox.error(that.getI18nText("errorFetchingHierData"));                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		//recursive function being called to get data for hierarchy until prev data is fully expanded and resolved                                                                                                                                                   
		__recCallHierarchy: function (sNodeId, oServiceModel, oController, sVersionId) {                                                                                                                                                                             
                                                                                                                                                                                                                                                               
			return new Promise(function (resolve, reject) {                                                                                                                                                                                                             
				//debugger;                                                                                                                                                                                                                                                
				let oFilter = new Filter("NodeParentId", FilterOperator.EQ, sNodeId),                                                                                                                                                                                      
					that = oController,                                                                                                                                                                                                                                       
					sVer = sVersionId;                                                                                                                                                                                                                                        
				oServiceModel.read("/HierarchyVersionSet('" + sVer + "')/Nodes", {                                                                                                                                                                                         
					filters: [oFilter],                                                                                                                                                                                                                                       
					method: "GET",                                                                                                                                                                                                                                            
					success: async function (oData) {                                                                                                                                                                                                                         
						//sort the data so that collapsed nodes are always processed first..if leaf processed first then it will be resolved early                                                                                                                               
						oData.results.sort(function (a, b) {                                                                                                                                                                                                                     
							var textA = a.DrillState.toUpperCase();                                                                                                                                                                                                                 
							var textB = b.DrillState.toUpperCase();                                                                                                                                                                                                                 
							return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;                                                                                                                                                                                                  
						});                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
						if (oData.results.length === 0) {                                                                                                                                                                                                                        
							resolve(oData);                                                                                                                                                                                                                                         
						}                                                                                                                                                                                                                                                        
						for (let i = 0; i < oData.results.length; i++) {                                                                                                                                                                                                         
							oData.results[i].Covered = '';                                                                                                                                                                                                                          
							oData.results[i].PlOpeningBalance = 0;                                                                                                                                                                                                                  
							oData.results[i].EqOpeningBalance = 0;                                                                                                                                                                                                                  
							oData.results[i].OpeningBalanceDTADTL = 0;                                                                                                                                                                                                              
							oData.results[i].PlYearBalance = 0;                                                                                                                                                                                                                     
							oData.results[i].EqYearBalance = 0;                                                                                                                                                                                                                     
							oData.results[i].OPlYearBalance = 0;                                                                                                                                                                                                                    
							oData.results[i].OEqYearBalance = 0;                                                                                                                                                                                                                    
							oData.results[i].CurrentYearMvmnt = 0;                                                                                                                                                                                                                  
							oData.results[i].PlClosingBalance = 0;                                                                                                                                                                                                                  
							oData.results[i].EqClosingBalance = 0;                                                                                                                                                                                                                  
							oData.results[i].ClosingBalanceDTADTL = 0;                                                                                                                                                                                                              
							oData.results[i].CTAPl = 0;                                                                                                                                                                                                                             
							oData.results[i].CTAEq = 0;                                                                                                                                                                                                                             
							oData.results[i].CTA = 0;                                                                                                                                                                                                                               
							oData.results[i].PYAPl = 0;                                                                                                                                                                                                                             
							oData.results[i].PYAEq = 0;                                                                                                                                                                                                                             
							oData.results[i].PYAOpl = 0;                                                                                                                                                                                                                            
							oData.results[i].PYAOeq = 0;                                                                                                                                                                                                                            
							oData.results[i].PYA = 0;                                                                                                                                                                                                                               
							oData.results[i].TRCPl = 0;                                                                                                                                                                                                                             
							oData.results[i].TRCEq = 0;                                                                                                                                                                                                                             
							oData.results[i].TRC = 0;                                                                                                                                                                                                                               
							oData.results[i].MainCurrency = '';                                                                                                                                                                                                                     
							aGlblArr.push(oData.results[i]);                                                                                                                                                                                                                        
							if (oData.results[i].DrillState !== "leaf") {                                                                                                                                                                                                           
								await that.__recCallHierarchy(oData.results[i].NodeId, oServiceModel, that, sVer);                                                                                                                                                                     
								//for TESTN type scenario as promise resolves early without covering all siblings                                                                                                                                                                      
								//if both are collapsed then check if both of them are covered.                                                                                                                                                                                        
								if (oData.results.length === (i + 1)) {                                                                                                                                                                                                                
									resolve(oData);                                                                                                                                                                                                                                       
								}                                                                                                                                                                                                                                                      
							} else {                                                                                                                                                                                                                                                
								resolve(oData);                                                                                                                                                                                                                                        
							}                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
						}                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
					},                                                                                                                                                                                                                                                        
					error: function (oError) {                                                                                                                                                                                                                                
						MessageBox.error(that.getI18nText("errorFetchingHierData"));                                                                                                                                                                                             
						reject(oError)                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				});                                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//adding and calculating amount field for all the data for which hierarchy needs to be shown for fs item.                                                                                                                                                    
		_calculateAmountFSItem: function (data) {                                                                                                                                                                                                                    
			let that = this,                                                                                                                                                                                                                                            
				oTable = this.getView().byId("idTreeHierFSItem"),                                                                                                                                                                                                          
				fsitemData = data.filter(node => node.NodeEntity === 'FINCS_FSITEM'),                                                                                                                                                                                      
				dtrfData = this.getView().getModel("oDTRFModel").getData();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			//oTable.setVisibleRowCount(data.length);                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			if (fsitemData.length === 0) {                                                                                                                                                                                                                              
				for (var i = 0; i < data.length; i++) { // covers all the nodes in case there is no FS Item                                                                                                                                                                
					data[i].Covered = 'X';                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				MessageBox.warning(that.getI18nText("warningFetchingFSItem"));                                                                                                                                                                                             
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//adding and calculating amount for each FS item                                                                                                                                                                                                            
			for (let i = 0; i < fsitemData.length; i++) {                                                                                                                                                                                                               
				//above fs item can be present more than once in the below recon data                                                                                                                                                                                      
				for (let j = 0; j < dtrfData.length; j++) {                                                                                                                                                                                                                
					if (fsitemData[i].NodeLowValue === dtrfData[j].FinancialStatementItem) {                                                                                                                                                                                  
						fsitemData[i].PlOpeningBalance = fsitemData[i].PlOpeningBalance + parseFloat(dtrfData[j].PlOpeningBalance, [10]);                                                                                                                                        
						fsitemData[i].EqOpeningBalance = fsitemData[i].EqOpeningBalance + parseFloat(dtrfData[j].EqOpeningBalance, [10]);                                                                                                                                        
						fsitemData[i].OpeningBalanceDTADTL = fsitemData[i].OpeningBalanceDTADTL + parseFloat(dtrfData[j].OpeningBalanceDTADTL, [10]);                                                                                                                            
						fsitemData[i].PlYearBalance = fsitemData[i].PlYearBalance + parseFloat(dtrfData[j].PlYearBalance, [10]);                                                                                                                                                 
						fsitemData[i].EqYearBalance = fsitemData[i].EqYearBalance + parseFloat(dtrfData[j].EqYearBalance, [10]);                                                                                                                                                 
						fsitemData[i].OPlYearBalance = fsitemData[i].OPlYearBalance + parseFloat(dtrfData[j].OPlYearBalance, [10]);                                                                                                                                              
						fsitemData[i].OEqYearBalance = fsitemData[i].OEqYearBalance + parseFloat(dtrfData[j].OEqYearBalance, [10]);                                                                                                                                              
						fsitemData[i].CurrentYearMvmnt = fsitemData[i].CurrentYearMvmnt + parseFloat(dtrfData[j].CurrentYearMvmnt, [10]);                                                                                                                                        
						fsitemData[i].PlClosingBalance = fsitemData[i].PlClosingBalance + parseFloat(dtrfData[j].PlClosingBalance, [10]);                                                                                                                                        
						fsitemData[i].EqClosingBalance = fsitemData[i].EqClosingBalance + parseFloat(dtrfData[j].EqClosingBalance, [10]);                                                                                                                                        
						fsitemData[i].ClosingBalanceDTADTL = fsitemData[i].ClosingBalanceDTADTL + parseFloat(dtrfData[j].ClosingBalanceDTADTL, [10]);                                                                                                                            
						fsitemData[i].CTAPl = fsitemData[i].CTAPl + parseFloat(dtrfData[j].CTAPl, [10]);                                                                                                                                                                         
						fsitemData[i].CTAEq = fsitemData[i].CTAEq + parseFloat(dtrfData[j].CTAEq, [10]);                                                                                                                                                                         
						fsitemData[i].CTA = fsitemData[i].CTA + parseFloat(dtrfData[j].CTA, [10]);                                                                                                                                                                               
						fsitemData[i].PYAPl = fsitemData[i].PYAPl + parseFloat(dtrfData[j].PYAPl, [10]);                                                                                                                                                                         
						fsitemData[i].PYAEq = fsitemData[i].PYAEq + parseFloat(dtrfData[j].PYAEq, [10]);                                                                                                                                                                         
						fsitemData[i].PYAOpl = fsitemData[i].PYAOpl + parseFloat(dtrfData[j].PYAOpl, [10]);                                                                                                                                                                      
						fsitemData[i].PYAOeq = fsitemData[i].PYAOeq + parseFloat(dtrfData[j].PYAOeq, [10]);                                                                                                                                                                      
						fsitemData[i].PYA = fsitemData[i].PYA + parseFloat(dtrfData[j].PYA, [10]);                                                                                                                                                                               
						fsitemData[i].TRCPl = fsitemData[i].TRCPl + parseFloat(dtrfData[j].TRCPl, [10]);                                                                                                                                                                         
						fsitemData[i].TRCEq = fsitemData[i].TRCEq + parseFloat(dtrfData[j].TRCEq, [10]);                                                                                                                                                                         
						fsitemData[i].TRC = fsitemData[i].TRC + parseFloat(dtrfData[j].TRC, [10]);                                                                                                                                                                               
						fsitemData[i].MainCurrency = dtrfData[j].MainCurrency;                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//covering all the FS items                                                                                                                                                                                                                                 
			for (let i = 0; i < fsitemData.length; i++) {                                                                                                                                                                                                               
				for (let j = 0; j < data.length; j++) {                                                                                                                                                                                                                    
					if (fsitemData[i].NodeParentId === data[j].NodeId) {                                                                                                                                                                                                      
						fsitemData[i].Covered = 'X';                                                                                                                                                                                                                             
						data[j].PlOpeningBalance = fsitemData[i].PlOpeningBalance + data[j].PlOpeningBalance;                                                                                                                                                                    
						data[j].EqOpeningBalance = fsitemData[i].EqOpeningBalance + data[j].EqOpeningBalance;                                                                                                                                                                    
						data[j].OpeningBalanceDTADTL = fsitemData[i].OpeningBalanceDTADTL + data[j].OpeningBalanceDTADTL;                                                                                                                                                        
						data[j].PlYearBalance = fsitemData[i].PlYearBalance + data[j].PlYearBalance;                                                                                                                                                                             
						data[j].EqYearBalance = fsitemData[i].EqYearBalance + data[j].EqYearBalance;                                                                                                                                                                             
						data[j].OPlYearBalance = fsitemData[i].OPlYearBalance + data[j].OPlYearBalance;                                                                                                                                                                          
						data[j].OEqYearBalance = fsitemData[i].OEqYearBalance + data[j].OEqYearBalance;                                                                                                                                                                          
						data[j].CurrentYearMvmnt = fsitemData[i].CurrentYearMvmnt + data[j].CurrentYearMvmnt;                                                                                                                                                                    
						data[j].PlClosingBalance = fsitemData[i].PlClosingBalance + data[j].PlClosingBalance;                                                                                                                                                                    
						data[j].EqClosingBalance = fsitemData[i].EqClosingBalance + data[j].EqClosingBalance;                                                                                                                                                                    
						data[j].ClosingBalanceDTADTL = fsitemData[i].ClosingBalanceDTADTL + data[j].ClosingBalanceDTADTL;                                                                                                                                                        
						data[j].CTAPl = fsitemData[i].CTAPl + data[j].CTAPl;                                                                                                                                                                                                     
						data[j].CTAEq = fsitemData[i].CTAEq + data[j].CTAEq;                                                                                                                                                                                                     
						data[j].CTA = fsitemData[i].CTA + data[j].CTA;                                                                                                                                                                                                           
						data[j].PYAPl = fsitemData[i].PYAPl + data[j].PYAPl;                                                                                                                                                                                                     
						data[j].PYAEq = fsitemData[i].PYAEq + data[j].PYAEq;                                                                                                                                                                                                     
						data[j].PYAOpl = fsitemData[i].PYAOpl + data[j].PYAOpl;                                                                                                                                                                                                  
						data[j].PYAOeq = fsitemData[i].PYAOeq + data[j].PYAOeq;                                                                                                                                                                                                  
						data[j].PYA = fsitemData[i].PYA + data[j].PYA;                                                                                                                                                                                                           
						data[j].TRCPl = fsitemData[i].TRCPl + data[j].TRCPl;                                                                                                                                                                                                     
						data[j].TRCEq = fsitemData[i].TRCEq + data[j].TRCEq;                                                                                                                                                                                                     
						data[j].TRC = fsitemData[i].TRC + data[j].TRC;                                                                                                                                                                                                           
						data[j].MainCurrency = fsitemData[i].MainCurrency;                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
						//if a parent has direct child as fsitem and also a normal child which is not an fs item then that  parent cannot be covered unless and until non fsitem child is covered                                                                                
						let nonFSChildData = data.filter(item => item.NodeParentId === data[j].NodeId && item.NodeEntity !== 'FINCS_FSITEM');                                                                                                                                    
                                                                                                                                                                                                                                                               
						if (nonFSChildData.length === 0) {                                                                                                                                                                                                                       
							data[j].Covered = 'X';                                                                                                                                                                                                                                  
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					//if a node is not an FS item and also it does not have any children then cover it as it will not get covered anytime as it does nt have any child                                                                                                        
                                                                                                                                                                                                                                                               
					if (data[j].Covered === '' && data[j].NodeEntity !== 'FINCS_FSITEM') {                                                                                                                                                                                    
						let noFSItemData = data.filter(item => item.NodeParentId === data[j].NodeId);                                                                                                                                                                            
						if (noFSItemData.length === 0) {                                                                                                                                                                                                                         
							data[j].Covered = 'X';                                                                                                                                                                                                                                  
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var nodeCoveredData = [];                                                                                                                                                                                                                                   
			var nodeNotCoveredData = [];                                                                                                                                                                                                                                
			nodeCoveredData = data.filter(node => node.Covered === 'X' && node.NodeEntity !== 'FINCS_FSITEM');                                                                                                                                                          
			nodeNotCoveredData = data.filter(node => node.Covered === '' && node.NodeEntity !== 'FINCS_FSITEM');                                                                                                                                                        
			//covering the remaining uncovered data until all get covered&nbsp;                                                                                                                                                                                         
			while (nodeNotCoveredData.length > 0) {                                                                                                                                                                                                                     
				for (let i = 0; i < nodeCoveredData.length; i++) {                                                                                                                                                                                                         
					for (let j = 0; j < nodeNotCoveredData.length; j++) {                                                                                                                                                                                                     
						if (nodeNotCoveredData[j].NodeId === nodeCoveredData[i].NodeParentId) {                                                                                                                                                                                  
							let parent = nodeNotCoveredData[j];                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
							if (nodeNotCoveredData.filter(item => item.NodeParentId === parent.NodeId).length === 0)                                                                                                                                                                
                                                                                                                                                                                                                                                               
							{                                                                                                                                                                                                                                                       
								parent.PlOpeningBalance = parent.PlOpeningBalance + nodeCoveredData[i].PlOpeningBalance;                                                                                                                                                               
								parent.EqOpeningBalance = parent.EqOpeningBalance + nodeCoveredData[i].EqOpeningBalance;                                                                                                                                                               
								parent.OpeningBalanceDTADTL = parent.OpeningBalanceDTADTL + nodeCoveredData[i].OpeningBalanceDTADTL;                                                                                                                                                   
								parent.PlYearBalance = parent.PlYearBalance + nodeCoveredData[i].PlYearBalance;                                                                                                                                                                        
								parent.EqYearBalance = parent.EqYearBalance + nodeCoveredData[i].EqYearBalance;                                                                                                                                                                        
								parent.OPlYearBalance = parent.OPlYearBalance + nodeCoveredData[i].OPlYearBalance;                                                                                                                                                                     
								parent.OEqYearBalance = parent.OEqYearBalance + nodeCoveredData[i].OEqYearBalance;                                                                                                                                                                     
								parent.CurrentYearMvmnt = parent.CurrentYearMvmnt + nodeCoveredData[i].CurrentYearMvmnt;                                                                                                                                                               
								parent.PlClosingBalance = parent.PlClosingBalance + nodeCoveredData[i].PlClosingBalance;                                                                                                                                                               
								parent.EqClosingBalance = parent.EqClosingBalance + nodeCoveredData[i].EqClosingBalance;                                                                                                                                                               
								parent.ClosingBalanceDTADTL = nodeCoveredData[i].ClosingBalanceDTADTL + parent.ClosingBalanceDTADTL;                                                                                                                                                   
								parent.CTAPl = nodeCoveredData[i].CTAPl + parent.CTAPl;                                                                                                                                                                                                
								parent.CTAEq = nodeCoveredData[i].CTAEq + parent.CTAEq;                                                                                                                                                                                                
								parent.CTA = nodeCoveredData[i].CTA + parent.CTA;                                                                                                                                                                                                      
								parent.PYAPl = nodeCoveredData[i].PYAPl + parent.PYAPl;                                                                                                                                                                                                
								parent.PYAEq = nodeCoveredData[i].PYAEq + parent.PYAEq;                                                                                                                                                                                                
								parent.PYAOpl = nodeCoveredData[i].PYAOpl + parent.PYAOpl;                                                                                                                                                                                             
								parent.PYAOeq = nodeCoveredData[i].PYAOeq + parent.PYAOeq;                                                                                                                                                                                             
								parent.PYA = nodeCoveredData[i].PYA + parent.PYA;                                                                                                                                                                                                      
								parent.TRCPl = nodeCoveredData[i].TRCPl + parent.TRCPl;                                                                                                                                                                                                
								parent.TRCEq = nodeCoveredData[i].TRCEq + parent.TRCEq;                                                                                                                                                                                                
								parent.TRC = nodeCoveredData[i].TRC + parent.TRC;                                                                                                                                                                                                      
								parent.Covered = 'X';                                                                                                                                                                                                                                  
								parent.MainCurrency = nodeCoveredData[i].MainCurrency;                                                                                                                                                                                                 
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				nodeNotCoveredData = data.filter(node => node.Covered === '' && node.NodeEntity !== 'FINCS_FSITEM');                                                                                                                                                       
				nodeCoveredData = data.filter(node => node.Covered === 'X' && node.NodeEntity !== 'FINCS_FSITEM')                                                                                                                                                          
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			for (var i = 0; i < data.length; i++) { // add childs to every item                                                                                                                                                                                         
				data[i].childs = [];                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			let tree = this._buildTree(data);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var dHierData = {                                                                                                                                                                                                                                           
				"childs": tree                                                                                                                                                                                                                                             
			}                                                                                                                                                                                                                                                           
			this.getView().getModel("HierDatModel").setData([]);                                                                                                                                                                                                        
			this.getView().getModel("HierDatModel").setData(dHierData);                                                                                                                                                                                                 
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			//adjust table column width                                                                                                                                                                                                                                 
			var oIntervalCall = window.setInterval(function () {                                                                                                                                                                                                        
				this.onAdjustTableCol(oTable);                                                                                                                                                                                                                             
				window.clearInterval(oIntervalCall);                                                                                                                                                                                                                       
			}.bind(this), 1000);                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		//adding and calculating amount field for all the data for which hierarchy needs to be shown for gl account.                                                                                                                                                 
		_calculateAmountGLAcc: function (data) {                                                                                                                                                                                                                     
			let that = this,                                                                                                                                                                                                                                            
				oTable = this.getView().byId("idTreeHierGLAcc"),                                                                                                                                                                                                           
				glAccData = data.filter(node => node.NodeEntity === 'GLACCOUNT'),                                                                                                                                                                                          
				dtrfData = this.getView().getModel("oDTRFModel").getData();                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
			if (glAccData.length === 0) {                                                                                                                                                                                                                               
				for (var i = 0; i < data.length; i++) { // covers all the nodes in case there is no Gl Account                                                                                                                                                             
					data[i].Covered = 'X';                                                                                                                                                                                                                                    
				}                                                                                                                                                                                                                                                          
				MessageBox.warning(that.getI18nText("warningFetchingGLAcc"));                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//adding and calculating amount for each GL Account                                                                                                                                                                                                         
			for (let i = 0; i < glAccData.length; i++) {                                                                                                                                                                                                                
				//above fs item can be present more than once in the below recon data                                                                                                                                                                                      
				for (let j = 0; j < dtrfData.length; j++) {                                                                                                                                                                                                                
					if (glAccData[i].NodeLowValue === dtrfData[j].GLAccount) {                                                                                                                                                                                                
						glAccData[i].PlOpeningBalance = glAccData[i].PlOpeningBalance + parseFloat(dtrfData[j].PlOpeningBalance, [10]);                                                                                                                                          
						glAccData[i].EqOpeningBalance = glAccData[i].EqOpeningBalance + parseFloat(dtrfData[j].EqOpeningBalance, [10]);                                                                                                                                          
						glAccData[i].OpeningBalanceDTADTL = glAccData[i].OpeningBalanceDTADTL + parseFloat(dtrfData[j].OpeningBalanceDTADTL, [10]);                                                                                                                              
						glAccData[i].PlYearBalance = glAccData[i].PlYearBalance + parseFloat(dtrfData[j].PlYearBalance, [10]);                                                                                                                                                   
						glAccData[i].EqYearBalance = glAccData[i].EqYearBalance + parseFloat(dtrfData[j].EqYearBalance, [10]);                                                                                                                                                   
						glAccData[i].OPlYearBalance = glAccData[i].OPlYearBalance + parseFloat(dtrfData[j].OPlYearBalance, [10]);                                                                                                                                                
						glAccData[i].OEqYearBalance = glAccData[i].OEqYearBalance + parseFloat(dtrfData[j].OEqYearBalance, [10]);                                                                                                                                                
						glAccData[i].CurrentYearMvmnt = glAccData[i].CurrentYearMvmnt + parseFloat(dtrfData[j].CurrentYearMvmnt, [10]);                                                                                                                                          
						glAccData[i].PlClosingBalance = glAccData[i].PlClosingBalance + parseFloat(dtrfData[j].PlClosingBalance, [10]);                                                                                                                                          
						glAccData[i].EqClosingBalance = glAccData[i].EqClosingBalance + parseFloat(dtrfData[j].EqClosingBalance, [10]);                                                                                                                                          
						glAccData[i].ClosingBalanceDTADTL = glAccData[i].ClosingBalanceDTADTL + parseFloat(dtrfData[j].ClosingBalanceDTADTL, [10]);                                                                                                                              
						glAccData[i].CTAPl = glAccData[i].CTAPl + parseFloat(dtrfData[j].CTAPl, [10]);                                                                                                                                                                           
						glAccData[i].CTAEq = glAccData[i].CTAEq + parseFloat(dtrfData[j].CTAEq, [10]);                                                                                                                                                                           
						glAccData[i].CTA = glAccData[i].CTA + parseFloat(dtrfData[j].CTA, [10]);                                                                                                                                                                                 
						glAccData[i].PYAPl = glAccData[i].PYAPl + parseFloat(dtrfData[j].PYAPl, [10]);                                                                                                                                                                           
						glAccData[i].PYAEq = glAccData[i].PYAEq + parseFloat(dtrfData[j].PYAEq, [10]);                                                                                                                                                                           
						glAccData[i].PYAOpl = glAccData[i].PYAOpl + parseFloat(dtrfData[j].PYAOpl, [10]);                                                                                                                                                                        
						glAccData[i].PYAOeq = glAccData[i].PYAOeq + parseFloat(dtrfData[j].PYAOeq, [10]);                                                                                                                                                                        
						glAccData[i].PYA = glAccData[i].PYA + parseFloat(dtrfData[j].PYA, [10]);                                                                                                                                                                                 
						glAccData[i].TRCPl = glAccData[i].TRCPl + parseFloat(dtrfData[j].TRCPl, [10]);                                                                                                                                                                           
						glAccData[i].TRCEq = glAccData[i].TRCEq + parseFloat(dtrfData[j].TRCEq, [10]);                                                                                                                                                                           
						glAccData[i].TRC = glAccData[i].TRC + parseFloat(dtrfData[j].TRC, [10]);                                                                                                                                                                                 
						glAccData[i].MainCurrency = dtrfData[j].MainCurrency;                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//covering all the GL Accounts                                                                                                                                                                                                                              
			for (let i = 0; i < glAccData.length; i++) {                                                                                                                                                                                                                
				for (let j = 0; j < data.length; j++) {                                                                                                                                                                                                                    
					if (glAccData[i].NodeParentId === data[j].NodeId) {                                                                                                                                                                                                       
						glAccData[i].Covered = 'X';                                                                                                                                                                                                                              
						data[j].PlOpeningBalance = glAccData[i].PlOpeningBalance + data[j].PlOpeningBalance;                                                                                                                                                                     
						data[j].EqOpeningBalance = glAccData[i].EqOpeningBalance + data[j].EqOpeningBalance;                                                                                                                                                                     
						data[j].OpeningBalanceDTADTL = glAccData[i].OpeningBalanceDTADTL + data[j].OpeningBalanceDTADTL;                                                                                                                                                         
						data[j].PlYearBalance = glAccData[i].PlYearBalance + data[j].PlYearBalance;                                                                                                                                                                              
						data[j].EqYearBalance = glAccData[i].EqYearBalance + data[j].EqYearBalance;                                                                                                                                                                              
						data[j].OPlYearBalance = glAccData[i].OPlYearBalance + data[j].OPlYearBalance;                                                                                                                                                                           
						data[j].OEqYearBalance = glAccData[i].OEqYearBalance + data[j].OEqYearBalance;                                                                                                                                                                           
						data[j].CurrentYearMvmnt = glAccData[i].CurrentYearMvmnt + data[j].CurrentYearMvmnt;                                                                                                                                                                     
						data[j].PlClosingBalance = glAccData[i].PlClosingBalance + data[j].PlClosingBalance;                                                                                                                                                                     
						data[j].EqClosingBalance = glAccData[i].EqClosingBalance + data[j].EqClosingBalance;                                                                                                                                                                     
						data[j].ClosingBalanceDTADTL = glAccData[i].ClosingBalanceDTADTL + data[j].ClosingBalanceDTADTL;                                                                                                                                                         
						data[j].CTAPl = glAccData[i].CTAPl + data[j].CTAPl;                                                                                                                                                                                                      
						data[j].CTAEq = glAccData[i].CTAEq + data[j].CTAEq;                                                                                                                                                                                                      
						data[j].CTA = glAccData[i].CTA + data[j].CTA;                                                                                                                                                                                                            
						data[j].PYAPl = glAccData[i].PYAPl + data[j].PYAPl;                                                                                                                                                                                                      
						data[j].PYAEq = glAccData[i].PYAEq + data[j].PYAEq;                                                                                                                                                                                                      
						data[j].PYAOpl = glAccData[i].PYAOpl + data[j].PYAOpl;                                                                                                                                                                                                   
						data[j].PYAOeq = glAccData[i].PYAOeq + data[j].PYAOeq;                                                                                                                                                                                                   
						data[j].PYA = glAccData[i].PYA + data[j].PYA;                                                                                                                                                                                                            
						data[j].TRCPl = glAccData[i].TRCPl + data[j].TRCPl;                                                                                                                                                                                                      
						data[j].TRCEq = glAccData[i].TRCEq + data[j].TRCEq;                                                                                                                                                                                                      
						data[j].TRC = glAccData[i].TRC + data[j].TRC;                                                                                                                                                                                                            
						data[j].MainCurrency = glAccData[i].MainCurrency;                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
						//if a parent has direct child as fsitem and also a normal child which is not an fs item then that  parent cannot be covered unless and until non fsitem child is covered                                                                                
						let nonFSChildData = data.filter(item => item.NodeParentId === data[j].NodeId && item.NodeEntity !== 'GLACCOUNT');                                                                                                                                       
                                                                                                                                                                                                                                                               
						if (nonFSChildData.length === 0) {                                                                                                                                                                                                                       
							data[j].Covered = 'X';                                                                                                                                                                                                                                  
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					//if a node is not an FS item and also it does not have any children then cover it as it will not get covered anytime as it does nt have any child                                                                                                        
                                                                                                                                                                                                                                                               
					if (data[j].Covered === '' && data[j].NodeEntity !== 'GLACCOUNT') {                                                                                                                                                                                       
						let noglAccData = data.filter(item => item.NodeParentId === data[j].NodeId);                                                                                                                                                                             
						if (noglAccData.length === 0) {                                                                                                                                                                                                                          
							data[j].Covered = 'X';                                                                                                                                                                                                                                  
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var nodeCoveredData = [];                                                                                                                                                                                                                                   
			var nodeNotCoveredData = [];                                                                                                                                                                                                                                
			nodeCoveredData = data.filter(node => node.Covered === 'X' && node.NodeEntity !== 'GLACCOUNT');                                                                                                                                                             
			nodeNotCoveredData = data.filter(node => node.Covered === '' && node.NodeEntity !== 'GLACCOUNT');                                                                                                                                                           
                                                                                                                                                                                                                                                               
			//covering the remaining uncovered data until all get covered&nbsp;                                                                                                                                                                                         
			while (nodeNotCoveredData.length > 0) {                                                                                                                                                                                                                     
				for (let i = 0; i < nodeCoveredData.length; i++) {                                                                                                                                                                                                         
					for (let j = 0; j < nodeNotCoveredData.length; j++) {                                                                                                                                                                                                     
						if (nodeNotCoveredData[j].NodeId === nodeCoveredData[i].NodeParentId) {                                                                                                                                                                                  
							let parent = nodeNotCoveredData[j];                                                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
							if (nodeNotCoveredData.filter(item => item.NodeParentId === parent.NodeId).length === 0)                                                                                                                                                                
                                                                                                                                                                                                                                                               
							{                                                                                                                                                                                                                                                       
								parent.PlOpeningBalance = parent.PlOpeningBalance + nodeCoveredData[i].PlOpeningBalance;                                                                                                                                                               
								parent.EqOpeningBalance = parent.EqOpeningBalance + nodeCoveredData[i].EqOpeningBalance;                                                                                                                                                               
								parent.OpeningBalanceDTADTL = parent.OpeningBalanceDTADTL + nodeCoveredData[i].OpeningBalanceDTADTL;                                                                                                                                                   
								parent.PlYearBalance = parent.PlYearBalance + nodeCoveredData[i].PlYearBalance;                                                                                                                                                                        
								parent.EqYearBalance = parent.EqYearBalance + nodeCoveredData[i].EqYearBalance;                                                                                                                                                                        
								parent.OPlYearBalance = parent.OPlYearBalance + nodeCoveredData[i].OPlYearBalance;                                                                                                                                                                     
								parent.OEqYearBalance = parent.OEqYearBalance + nodeCoveredData[i].OEqYearBalance;                                                                                                                                                                     
								parent.CurrentYearMvmnt = parent.CurrentYearMvmnt + nodeCoveredData[i].CurrentYearMvmnt;                                                                                                                                                               
								parent.PlClosingBalance = parent.PlClosingBalance + nodeCoveredData[i].PlClosingBalance;                                                                                                                                                               
								parent.EqClosingBalance = parent.EqClosingBalance + nodeCoveredData[i].EqClosingBalance;                                                                                                                                                               
								parent.ClosingBalanceDTADTL = nodeCoveredData[i].ClosingBalanceDTADTL + parent.ClosingBalanceDTADTL;                                                                                                                                                   
								parent.CTAPl = nodeCoveredData[i].CTAPl + parent.CTAPl;                                                                                                                                                                                                
								parent.CTAEq = nodeCoveredData[i].CTAEq + parent.CTAEq;                                                                                                                                                                                                
								parent.CTA = nodeCoveredData[i].CTA + parent.CTA;                                                                                                                                                                                                      
								parent.PYAPl = nodeCoveredData[i].PYAPl + parent.PYAPl;                                                                                                                                                                                                
								parent.PYAEq = nodeCoveredData[i].PYAEq + parent.PYAEq;                                                                                                                                                                                                
								parent.PYAOpl = nodeCoveredData[i].PYAOpl + parent.PYAOpl;                                                                                                                                                                                             
								parent.PYAOeq = nodeCoveredData[i].PYAOeq + parent.PYAOeq;                                                                                                                                                                                             
								parent.PYA = nodeCoveredData[i].PYA + parent.PYA;                                                                                                                                                                                                      
								parent.TRCPl = nodeCoveredData[i].TRCPl + parent.TRCPl;                                                                                                                                                                                                
								parent.TRCEq = nodeCoveredData[i].TRCEq + parent.TRCEq;                                                                                                                                                                                                
								parent.TRC = nodeCoveredData[i].TRC + parent.TRC;                                                                                                                                                                                                      
								parent.Covered = 'X';                                                                                                                                                                                                                                  
								parent.MainCurrency = nodeCoveredData[i].MainCurrency;                                                                                                                                                                                                 
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				nodeNotCoveredData = data.filter(node => node.Covered === '' && node.NodeEntity !== 'GLACCOUNT');                                                                                                                                                          
				nodeCoveredData = data.filter(node => node.Covered === 'X' && node.NodeEntity !== 'GLACCOUNT')                                                                                                                                                             
                                                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
			for (var i = 0; i < data.length; i++) { // add childs to every item                                                                                                                                                                                         
				data[i].childs = [];                                                                                                                                                                                                                                       
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			let tree = this._buildTree(data);                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			var dHierData = {                                                                                                                                                                                                                                           
				"childs": tree                                                                                                                                                                                                                                             
			}                                                                                                                                                                                                                                                           
			this.getView().getModel("HierDatModelGL").setData([]);                                                                                                                                                                                                      
			this.getView().getModel("HierDatModelGL").setData(dHierData);                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			//adjust table column width                                                                                                                                                                                                                                 
			var oIntervalCall = window.setInterval(function () {                                                                                                                                                                                                        
				this.onAdjustTableCol(oTable);                                                                                                                                                                                                                             
				window.clearInterval(oIntervalCall);                                                                                                                                                                                                                       
			}.bind(this), 1000);                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//recursive function to build the hierarchy tree data                                                                                                                                                                                                        
		_buildTree: function (tree, item) {                                                                                                                                                                                                                          
			if (item) { // if item then have parent                                                                                                                                                                                                                     
				for (var i = 0; i < tree.length; i++) { // parses the entire tree in order to find the parent                                                                                                                                                              
					if (String(tree[i].NodeId) === String(item.NodeParentId)) { // bingo!                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
						tree[i].childs.push(item); // add the child to his parent                                                                                                                                                                                                
						break;                                                                                                                                                                                                                                                   
					} else this._buildTree(tree[i].childs, item); // if item doesn't match but tree have childs then parses childs again to find item parent                                                                                                                  
				}                                                                                                                                                                                                                                                          
			} else { // if no item then is a root item, multiple root items are supported                                                                                                                                                                               
				var idx = 0;                                                                                                                                                                                                                                               
				while (idx < tree.length)                                                                                                                                                                                                                                  
					if (tree[idx].NodeParentId) this._buildTree(tree, tree.splice(idx, 1)[0]) // if have parent then remove it from the array to relocate it to the right place                                                                                               
					else idx++; // if doesn't have parent then is root and move it to the next object                                                                                                                                                                         
			}                                                                                                                                                                                                                                                           
			return tree;                                                                                                                                                                                                                                                
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_fetchGlobalParameters: function () {                                                                                                                                                                                                                        
			var that = this;                                                                                                                                                                                                                                            
			var oGlobalParameterData = {                                                                                                                                                                                                                                
				"Default": true                                                                                                                                                                                                                                            
			};                                                                                                                                                                                                                                                          
			var oModel = this.getOwnerComponent().getModel();                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			oModel.callFunction("/GlobalParameter", {                                                                                                                                                                                                                   
				method: "GET",                                                                                                                                                                                                                                             
				urlParameters: oGlobalParameterData,                                                                                                                                                                                                                       
				success: function (oData) {                                                                                                                                                                                                                                
					// Saving global parameters in Model                                                                                                                                                                                                                      
					that.getView().getModel("viewConfigDataModel").setData({                                                                                                                                                                                                  
						"globalParameters": oData                                                                                                                                                                                                                                
					});                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
					// If 'VARIANT' is being used, Do Not over write global parameters                                                                                                                                                                                        
					let oFilterBar = that.getView().byId("idsmartFilterBar");                                                                                                                                                                                                 
					if (!oFilterBar.getCurrentVariantId()) {                                                                                                                                                                                                                  
						that._setFilterBarParameters(oData);                                                                                                                                                                                                                     
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					MessageBox.error(that.getI18nText("errorReadingGlobalParameters"));                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_setFilterBarParameters: function (oGlobalParameters) {                                                                                                                                                                                                      
			let oView = this.getView(),                                                                                                                                                                                                                                 
				oCurrency = oView.byId("idCurrency");                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.LocalCurrencyType && oGlobalParameters.LocalCurrency) {                                                                                                                                                                               
				oCurrency.setSelectedKey(oGlobalParameters.LocalCurrency);                                                                                                                                                                                                 
			} else {                                                                                                                                                                                                                                                    
				oCurrency.setSelectedKey(oGlobalParameters.GroupCurrency);                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.ConsolidationUnit) {                                                                                                                                                                                                                  
				oView.byId("idConsUnit").setSelectedKey(oGlobalParameters.ConsolidationUnit);                                                                                                                                                                              
				oCurrency.setVisible(true);                                                                                                                                                                                                                                
				this._fetchCurrencyData(true);                                                                                                                                                                                                                             
				this.fetchReconLedgerData();                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.FiscalYear) {                                                                                                                                                                                                                         
				// Generating a Date mid-year 6th of June - with provided fiscal year.                                                                                                                                                                                     
				let oFiscalYearDate = new Date("06/06/".concat(oGlobalParameters.FiscalYear.toString()));                                                                                                                                                                  
				oView.byId("idFiscalYearFilter").setDateValue(oFiscalYearDate);                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.Intention) {                                                                                                                                                                                                                          
				oView.byId("idIntentionComboBox").setSelectedKey(oGlobalParameters.Intention);                                                                                                                                                                             
			}                                                                                                                                                                                                                                                           
			// Fetch data for Intention. This is independent of Intention data stored in Global Parameter App.                                                                                                                                                          
			var aParam = [oGlobalParameters.ConsolidationUnit, oGlobalParameters.FiscalYear];                                                                                                                                                                           
			this._fetchIntentionStatus(aParam);                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.PeriodFrom) {                                                                                                                                                                                                                         
				oView.byId("idPeriodFromInput").setValue(formatter.convertStringToInt(oGlobalParameters.PeriodFrom));                                                                                                                                                      
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			if (oGlobalParameters.PeriodTo) {                                                                                                                                                                                                                           
				oView.byId("idPeriodToInput").setValue(formatter.convertStringToInt(oGlobalParameters.PeriodTo));                                                                                                                                                          
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		getI18nText: function (sTextKey) {                                                                                                                                                                                                                           
			return this.getResourceBundle().getText(sTextKey);                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_fetchCurrencyData: function (bIsVariantCall) {                                                                                                                                                                                                              
			var oView = this.getView(),                                                                                                                                                                                                                                 
				consKey = oView.byId("idConsUnit").getSelectedKey(),                                                                                                                                                                                                       
				oFilter = new Filter("ConsolidationUnit", FilterOperator.EQ, consKey),                                                                                                                                                                                     
				oServiceCallModel = this.getModel(),                                                                                                                                                                                                                       
				that = this,                                                                                                                                                                                                                                               
				oCurrencyCtrl = oView.byId("idCurrType"),                                                                                                                                                                                                                  
				oCurrControl = oView.byId("idCurrency");                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			oCurrencyCtrl.setVisible(true);                                                                                                                                                                                                                             
			oCurrControl.setBusy(true);                                                                                                                                                                                                                                 
			oServiceCallModel.read("/xEY1xSAV_C_CurrLocalGroupVH", {                                                                                                                                                                                                    
				method: "GET",                                                                                                                                                                                                                                             
				filters: [oFilter],                                                                                                                                                                                                                                        
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					oCurrControl.setBusy(false);                                                                                                                                                                                                                              
					that.setModel(new JSONModel(oData), "currLocalGroupVHModel");                                                                                                                                                                                             
					if (!bIsVariantCall && oData.results.length > 0) {                                                                                                                                                                                                        
						oCurrControl.setSelectedKey(oData.results[0].Currency);                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					oCurrControl.setBusy(false);                                                                                                                                                                                                                              
					MessageToast.show(that.getI18nText("errorFetchingCurrency"));                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		_fetchIntentionStatus: function (aParam) {                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			let oServiceCallModel = this.getModel();                                                                                                                                                                                                                    
			let sBunit = aParam[0],                                                                                                                                                                                                                                     
				sYear = aParam[1],                                                                                                                                                                                                                                         
				sServiceURL = "/xEY1xSAV_C_IntentionsStatus(p_bunit='" + sBunit + "')/Set",                                                                                                                                                                                
				oFilter = new Filter("Gjahr", FilterOperator.EQ, sYear),                                                                                                                                                                                                   
				that = this,                                                                                                                                                                                                                                               
				oView = that.getView(),                                                                                                                                                                                                                                    
				oIntentionCtrl = oView.byId("idIntentionComboBox");                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			oServiceCallModel.read(sServiceURL, {                                                                                                                                                                                                                       
				method: "GET",                                                                                                                                                                                                                                             
				sorters: [                                                                                                                                                                                                                                                 
					new sap.ui.model.Sorter("SerialNumber")                                                                                                                                                                                                                   
				],                                                                                                                                                                                                                                                         
				filters: [oFilter],                                                                                                                                                                                                                                        
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					that.getBusyDialog().close();                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
					if (oData.results.length === 0) {                                                                                                                                                                                                                         
						oIntentionCtrl.setSelectedKey('');                                                                                                                                                                                                                       
						oIntentionCtrl.setEnabled(false);                                                                                                                                                                                                                        
						MessageBox.error(that.getI18nText("IntentionNotYetOpen") + sYear);                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
						return;                                                                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					oIntentionCtrl.setEnabled(true);                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
					let oGlobalParamter = that.getView().getModel("viewConfigDataModel").getData().globalParameters;                                                                                                                                                          
					oIntentionCtrl.setSelectedKey(oGlobalParamter.Intention);                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
					//Added Lines                                                                                                                                                                                                                                             
					oIntentionCtrl.setSelectedKey("");                                                                                                                                                                                                                        
					for (let m = 0; m < oData.results.length; m++) {                                                                                                                                                                                                          
						if (oData.results[m].isSelected === "X") {                                                                                                                                                                                                               
							oIntentionCtrl.setSelectedKey(oData.results[m].Intention);                                                                                                                                                                                              
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					if (oIntentionCtrl.getSelectedKey() === "") {                                                                                                                                                                                                             
						for (let n = 0; n < oData.results.length; n++) {                                                                                                                                                                                                         
							if (oData.results[n].status === "Open") {                                                                                                                                                                                                               
								oIntentionCtrl.setSelectedKey(oData.results[n].Intention);                                                                                                                                                                                             
							}                                                                                                                                                                                                                                                       
						}                                                                                                                                                                                                                                                        
					}                                                                                                                                                                                                                                                         
					//End added Lines                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					let oModel = new JSONModel(oData);                                                                                                                                                                                                                        
					that.getView().setModel(oModel, "intentionVHModel");                                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
					that._managePeriodFieldsEditability(false);                                                                                                                                                                                                               
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					that.getBusyDialog().close();                                                                                                                                                                                                                             
					MessageBox.error(that.getI18nText("errorFetchingIntentionStatus"));                                                                                                                                                                                       
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		// _fetchIntentionData: function () {                                                                                                                                                                                                                        
		// 	let oServiceCallModel = this.getModel(),                                                                                                                                                                                                                 
		// 		sServiceURL = "/xEY1xSAV_C_ReadIntentVH",                                                                                                                                                                                                               
		// 		that = this;                                                                                                                                                                                                                                            
		// 	this.getBusyDialog().open();                                                                                                                                                                                                                             
		// 	oServiceCallModel.read(sServiceURL, {                                                                                                                                                                                                                    
		// 		method: "GET",                                                                                                                                                                                                                                          
		// 		sorters: [                                                                                                                                                                                                                                              
		// 			new sap.ui.model.Sorter("SerialNumber")                                                                                                                                                                                                                
		// 		],                                                                                                                                                                                                                                                      
		// 		success: function (oData, oResponse) {                                                                                                                                                                                                                  
		// 			that.getBusyDialog().close();                                                                                                                                                                                                                          
		// 			let oModel = new JSONModel(oData);                                                                                                                                                                                                                     
		// 			that.getView().setModel(oModel, "intentionVHModel");                                                                                                                                                                                                   
		// 			that._managePeriodFieldsEditability(false);                                                                                                                                                                                                            
		// 		},                                                                                                                                                                                                                                                      
		// 		error: function (oError) {                                                                                                                                                                                                                              
		// 			that.getBusyDialog().close();                                                                                                                                                                                                                          
		// 			MessageToast.show(that.getI18nText("errorFetchingIntentions"));                                                                                                                                                                                        
		// 		}                                                                                                                                                                                                                                                       
		// 	});                                                                                                                                                                                                                                                      
		// },                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
		_managePeriodFieldsEditability: function (bIsChangeEventCalled) {                                                                                                                                                                                            
			let oView = this.getView(),                                                                                                                                                                                                                                 
				oIntentionCtrl = oView.byId("idIntentionComboBox");                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			if (!bIsChangeEventCalled) {                                                                                                                                                                                                                                
				oIntentionCtrl.setSelectedKey(oIntentionCtrl.getSelectedKey());                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			let oSelectedItem = oIntentionCtrl.getSelectedItem(),                                                                                                                                                                                                       
				oSelectedData = oSelectedItem.getBindingContext("intentionVHModel").getObject(),                                                                                                                                                                           
				oPeriodTo = oView.byId("idPeriodToInput"),                                                                                                                                                                                                                 
				iTaxIntentionVal = formatter.convertStringToInt(oSelectedData.TaxIntention);                                                                                                                                                                               
                                                                                                                                                                                                                                                               
			if (iTaxIntentionVal !== formatter.convertStringToInt(0)) {                                                                                                                                                                                                 
				oPeriodTo.setEditable(false);                                                                                                                                                                                                                              
				oPeriodTo.setValue(formatter.convertStringToInt(oSelectedData.PeriodTo));                                                                                                                                                                                  
			} else {                                                                                                                                                                                                                                                    
				// IF 'PERIODIC' selected, then set Editable                                                                                                                                                                                                               
				oPeriodTo.setEditable(true);                                                                                                                                                                                                                               
				// oPeriodTo.setValue(0);                                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		fetchReconLedgerData: function () {                                                                                                                                                                                                                          
			let oServiceCallModel = this.getModel();                                                                                                                                                                                                                    
			let sServiceURL = oServiceCallModel.createKey("/xEY1xSAV_C_Recon_Ledger", {                                                                                                                                                                                 
				"bunit": this.byId("idConsUnit").getSelectedKey()                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
			let that = this;                                                                                                                                                                                                                                            
			oServiceCallModel.read(sServiceURL, {                                                                                                                                                                                                                       
				method: "GET",                                                                                                                                                                                                                                             
				success: function (oData, oResponse) {                                                                                                                                                                                                                     
					var oModel = that.getModel("viewConfigDataModel");                                                                                                                                                                                                        
					oModel.getData().dtrfData = oData;                                                                                                                                                                                                                        
					oModel.refresh();                                                                                                                                                                                                                                         
				},                                                                                                                                                                                                                                                         
				error: function (oError) {                                                                                                                                                                                                                                 
					if (parseInt(oError.statusCode, [10]) !== 404) {                                                                                                                                                                                                          
						MessageToast.show(that.getI18nText("reconServiceCallError"));                                                                                                                                                                                            
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		/* =========================================================== */                                                                                                                                                                                            
		/* event handlers                                              */                                                                                                                                                                                            
		/* =========================================================== */                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
		onSearchButtonPressed: function (oEvent) {                                                                                                                                                                                                                   
			let oView = this.getView();                                                                                                                                                                                                                                 
			//	oView.byId("idTreeHierFSItem").collapseAll();                                                                                                                                                                                                            
			aGlblArr = [];                                                                                                                                                                                                                                              
			if (oView.byId("idHierCatTextInpt").getSelectedKey()) {                                                                                                                                                                                                     
				//till the time GLaccount logic is implemented - it should work for only FS item                                                                                                                                                                           
				if (oView.byId("idHierType").getSelectedKey() === "CS15") {                                                                                                                                                                                                
					oView.byId("idTreeHierFSItem").setBusy(true);                                                                                                                                                                                                             
				} else {                                                                                                                                                                                                                                                   
					oView.byId("idTreeHierGLAcc").setBusy(true);                                                                                                                                                                                                              
				}                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
				//fetch dtrf data to populate the amount fields                                                                                                                                                                                                            
				this._fetchDTRFData();                                                                                                                                                                                                                                     
				//fetch tree data and form tree                                                                                                                                                                                                                            
				//	this._fetchTreeData();                                                                                                                                                                                                                                  
				//	}                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
				//if no hier id is selected then we cannot proceed                                                                                                                                                                                                         
				oView.byId("idHierCatTextInpt").setValueState("Error");                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//to validate in case user types in the hier id input control---validate with the service call data                                                                                                                                                          
		onChangeHierId: function (oEvent) {                                                                                                                                                                                                                          
			let sHierId = oEvent.getSource().getSelectedKey(),                                                                                                                                                                                                          
				dHierIdData = this.getView().getModel("hierarCatModel").getData(),                                                                                                                                                                                         
				bExist = dHierIdData.some(item => item.HierarchyId === sHierId),                                                                                                                                                                                           
				oSmartFB = this.getView().byId("idsmartFilterBar");                                                                                                                                                                                                        
			if (bExist) {                                                                                                                                                                                                                                               
				oEvent.getSource().setValueState("None");                                                                                                                                                                                                                  
				oSmartFB.fireSearch();                                                                                                                                                                                                                                     
			} else {                                                                                                                                                                                                                                                    
				oEvent.getSource().setValueState("Error");                                                                                                                                                                                                                 
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onBeforeVariantSaveFilterBar: function (oEvent) {                                                                                                                                                                                                            
			let oView = this.getView(),                                                                                                                                                                                                                                 
				oFilterBar = oView.byId("idsmartFilterBar"),                                                                                                                                                                                                               
				oCnsdUnit = oView.byId("idConsUnit"),                                                                                                                                                                                                                      
				oFiscalYear = oView.byId("idFiscalYearFilter"),                                                                                                                                                                                                            
				oIntention = oView.byId("idIntentionComboBox"),                                                                                                                                                                                                            
				oCurrency = oView.byId("idCurrency"),                                                                                                                                                                                                                      
				oPeriodTo = oView.byId("idPeriodToInput");                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
			oFilterBar.setFilterData({                                                                                                                                                                                                                                  
				"_CUSTOM": {                                                                                                                                                                                                                                               
					"ConsolidationUnit": oCnsdUnit.getSelectedKey(),                                                                                                                                                                                                          
					"FiscalYear": oFiscalYear.getValue(),                                                                                                                                                                                                                     
					"Intention": oIntention.getSelectedKey(),                                                                                                                                                                                                                 
					"CurrType": oCurrency.getSelectedKey(),                                                                                                                                                                                                                   
					"PeriodTo": oPeriodTo.getValue(),                                                                                                                                                                                                                         
					"VariantID": oFilterBar.getCurrentVariantId()                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
			});                                                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
		onAfterVariantLoadFilterBar: function (oEvent) {                                                                                                                                                                                                             
			var oView = this.getView();                                                                                                                                                                                                                                 
			var oFilterBar = oView.byId("idsmartFilterBar");                                                                                                                                                                                                            
			var oCnsdUnit = oView.byId("idConsUnit");                                                                                                                                                                                                                   
			var oFiscalYear = oView.byId("idFiscalYearFilter");                                                                                                                                                                                                         
			let oIntention = oView.byId("idIntentionComboBox");                                                                                                                                                                                                         
			var oCurrency = oView.byId("idCurrency");                                                                                                                                                                                                                   
			let oPeriodTo = this.getView().byId("idPeriodToInput");                                                                                                                                                                                                     
			var oFilterData = oFilterBar.getFilterData()["_CUSTOM"];                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			//	Setting Data to filter fields                                                                                                                                                                                                                            
			oCnsdUnit.setSelectedKey(oFilterData.ConsolidationUnit);                                                                                                                                                                                                    
			oFiscalYear.setValue(oFilterData.FiscalYear);                                                                                                                                                                                                               
			oIntention.setSelectedKey(oFilterData.Intention);                                                                                                                                                                                                           
			oCurrency.setSelectedKey(oFilterData.CurrType);                                                                                                                                                                                                             
			oPeriodTo.setValue(formatter.convertStringToInt(oFilterData.PeriodTo));                                                                                                                                                                                     
                                                                                                                                                                                                                                                               
			// If Consolidation Unit is loaded, then call Ledger Data                                                                                                                                                                                                   
			if (oFilterData.ConsolidationUnit) {                                                                                                                                                                                                                        
				this.fetchReconLedgerData();                                                                                                                                                                                                                               
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// Fetch Currency Data for Dropdown                                                                                                                                                                                                                         
			if (oFilterData.CurrType) {                                                                                                                                                                                                                                 
				oCurrency.setVisible(true);                                                                                                                                                                                                                                
				this._fetchCurrencyData(true);                                                                                                                                                                                                                             
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			// if (oFilterData.ConsolidationUnit && oFilterData.FiscalYear && oFilterData.Intention) {                                                                                                                                                                  
			// this._fetchValidTaxRates({                                                                                                                                                                                                                               
			// 	ConsolidationUnit: oFilterData.ConsolidationUnit,                                                                                                                                                                                                       
			// 	PeriodTo: oFilterData.PeriodTo,                                                                                                                                                                                                                         
			// 	FiscalYear: oFilterData.FiscalYear.getFullYear()                                                                                                                                                                                                        
			// });                                                                                                                                                                                                                                                      
			// }                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			// Intention Data to be loaded.                                                                                                                                                                                                                             
			// If Intention is 'Empty' in Saved Variant, still we need data in DropDown list.                                                                                                                                                                           
			var aParam = [oCnsdUnit, oFiscalYear];                                                                                                                                                                                                                      
			this._fetchIntentionStatus(aParam);                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangeDatePickerFilter: function (oEvent) {                                                                                                                                                                                                                
			let oDP = oEvent.getSource(),                                                                                                                                                                                                                               
				sBunit = this.getView().byId("idConsUnit").getProperty("selectedKey");                                                                                                                                                                                     
			//oReconLedgerData.globalParameters.ConsolidationUnit;                                                                                                                                                                                                      
			if (oEvent.getParameter("valid")) {                                                                                                                                                                                                                         
				oDP.setValueState("None");                                                                                                                                                                                                                                 
				let sYear = oDP.getDateValue().getFullYear(),                                                                                                                                                                                                              
					aParam = [sBunit, sYear];                                                                                                                                                                                                                                 
				this._fetchIntentionStatus(aParam);                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
			} else {                                                                                                                                                                                                                                                    
				oDP.setValueState("Error");                                                                                                                                                                                                                                
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onConsUnitChange: function (oEvent) {                                                                                                                                                                                                                        
			this._fetchCurrencyData(false);                                                                                                                                                                                                                             
			this.fetchReconLedgerData();                                                                                                                                                                                                                                
			//Added Method Call                                                                                                                                                                                                                                         
			let oBunit = this.getView().byId("idConsUnit").getProperty("selectedKey");                                                                                                                                                                                  
			let aParam = [oBunit, this.getView().byId("idFiscalYearFilter").getDateValue().getFullYear()];                                                                                                                                                              
			this._fetchIntentionStatus(aParam);                                                                                                                                                                                                                         
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangeIntentionComboBox: function (oEvent) {                                                                                                                                                                                                               
			let oView = this.getView(),                                                                                                                                                                                                                                 
				oIntentionCtrl = oView.byId("idIntentionComboBox"),                                                                                                                                                                                                        
				oSelectedItem = oIntentionCtrl.getSelectedItem();                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			// Validation for Invalid data	                                                                                                                                                                                                                             
			if (!oSelectedItem) {                                                                                                                                                                                                                                       
				oIntentionCtrl.setSelectedItem("");                                                                                                                                                                                                                        
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
			this._managePeriodFieldsEditability(true);                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
			// Check if Tax Rate Maintained for selected intention.                                                                                                                                                                                                     
			// if (oEvent.getSource().getValue()) {                                                                                                                                                                                                                     
			// 	this._fetchValidTaxRates();                                                                                                                                                                                                                             
			// }                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
		//change event handling for hier type                                                                                                                                                                                                                        
		onChangeHierTypeCB: function (oEvent) {                                                                                                                                                                                                                      
			let sKey = oEvent.getSource().getSelectedKey(),                                                                                                                                                                                                             
				oView = this.getView();                                                                                                                                                                                                                                    
			if (sKey === "CS15") {                                                                                                                                                                                                                                      
				oView.byId("idFSitmSmartTable").setVisible(true);                                                                                                                                                                                                          
				oView.getModel("HierDatModel").setData([]);                                                                                                                                                                                                                
				oView.byId("idGLAccSmartTable").setVisible(false);                                                                                                                                                                                                         
			} else {                                                                                                                                                                                                                                                    
				oView.byId("idGLAccSmartTable").setVisible(true);                                                                                                                                                                                                          
				oView.byId("idFSitmSmartTable").setVisible(false);                                                                                                                                                                                                         
				oView.getModel("HierDatModelGL").setData([]);                                                                                                                                                                                                              
			}                                                                                                                                                                                                                                                           
			this._fetchValueHelpHierarchyTxt(sKey);                                                                                                                                                                                                                     
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onLiveChangePeriodTo: function () {                                                                                                                                                                                                                          
			let oPeriodTo = this.getView().byId("idPeriodToInput");                                                                                                                                                                                                     
			let p_fromyb = parseInt(this.getView().byId("idPeriodFromInput").getValue(), [10]);                                                                                                                                                                         
			let p_toyb = parseInt(oPeriodTo.getValue(), [10]);                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			oPeriodTo.setValueState("None");                                                                                                                                                                                                                            
			//	If PeriodTo < PeriodFrom, then do not execute further service call&nbsp;                                                                                                                                                                                 
			if (p_toyb < p_fromyb) {                                                                                                                                                                                                                                    
				oPeriodTo.setValueState("Error");                                                                                                                                                                                                                          
				oPeriodTo.setValueStateText(this.getI18nText("periodToLessThanPeriodFromErrorMsg"));                                                                                                                                                                       
				return;                                                                                                                                                                                                                                                    
			} else if (p_toyb > '012') {                                                                                                                                                                                                                                
				oPeriodTo.setValueState("Error");                                                                                                                                                                                                                          
				oPeriodTo.setValueStateText(this.getI18nText("periodToGreaterThanLastPeriod"));                                                                                                                                                                            
				return;                                                                                                                                                                                                                                                    
			}                                                                                                                                                                                                                                                           
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onValueHelpRequested: function (oEvent) {                                                                                                                                                                                                                    
			let oView = this.getView(),                                                                                                                                                                                                                                 
				aCols = oView.getModel("VHColumnModel").getData().cols,                                                                                                                                                                                                    
				that = this,                                                                                                                                                                                                                                               
				oInputHierId = this.getView().byId("idHierCatTextInpt");                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
			if (!this._oHierIdVHDialog) {                                                                                                                                                                                                                               
				this._oHierIdVHDialog = sap.ui.xmlfragment("ey.sap.fin.cs.hierarchyReportDTRF.fragment.hierarchyIdValueHelp", this);                                                                                                                                       
				this.getView().addDependent(this._oHierIdVHDialog);                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
			this._oHierIdVHDialog.getTableAsync().then(function (oTable) {                                                                                                                                                                                              
				//setting the rows in the VH  table                                                                                                                                                                                                                        
				oTable.setModel(oView.getModel("hierarCatModel"));                                                                                                                                                                                                         
				//setting the columns in the VH table                                                                                                                                                                                                                      
				oTable.setModel(oView.getModel("VHColumnModel"), "columns");                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
				oTable.bindAggregation("rows", "/");                                                                                                                                                                                                                       
				oTable.attachRowSelectionChange(function (evt) {                                                                                                                                                                                                           
					let oParams = evt.getParameters(), //this has what you need in it                                                                                                                                                                                         
						sHierId = oParams.rowContext.getProperty().HierarchyId;                                                                                                                                                                                                  
					oInputHierId.setSelectedKey(sHierId);                                                                                                                                                                                                                     
					that._oHierIdVHDialog.close();                                                                                                                                                                                                                            
				});                                                                                                                                                                                                                                                        
			});                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			this._oHierIdVHDialog.open();                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
		onValueHelpCancelPress: function () {                                                                                                                                                                                                                        
			this._oHierIdVHDialog.close();                                                                                                                                                                                                                              
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onValueHelpAfterClose: function () {                                                                                                                                                                                                                         
			this._oHierIdVHDialog.destroy();                                                                                                                                                                                                                            
			this._oHierIdVHDialog = undefined;                                                                                                                                                                                                                          
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//inside the value help of hier id when filter is applied and search is hit                                                                                                                                                                                  
		onFilterBarSearch: function (oEvent) {                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                               
			let aSelectionSet = oEvent.getParameter("selectionSet"),                                                                                                                                                                                                    
				aFilters = aSelectionSet.reduce(function (aResult, oControl) {                                                                                                                                                                                             
					if (oControl.getValue()) {                                                                                                                                                                                                                                
						aResult.push(new Filter({                                                                                                                                                                                                                                
							path: oControl.getName(),                                                                                                                                                                                                                               
							operator: FilterOperator.Contains,                                                                                                                                                                                                                      
							value1: oControl.getValue()                                                                                                                                                                                                                             
						}));                                                                                                                                                                                                                                                     
					}                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
					return aResult;                                                                                                                                                                                                                                           
				}, []);                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
			this._filterVHTable(new Filter({                                                                                                                                                                                                                            
				filters: aFilters,                                                                                                                                                                                                                                         
				and: true                                                                                                                                                                                                                                                  
			}));                                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//whenever a hierarchy is expanded columns need to be adjusted                                                                                                                                                                                               
		onUpdateRows: function (oEvent) {                                                                                                                                                                                                                            
			this.getBusyDialog().open();                                                                                                                                                                                                                                
			let oTable = oEvent.getSource();                                                                                                                                                                                                                            
			var oIntervalCall = window.setInterval(function () {                                                                                                                                                                                                        
				this.onAdjustTableCol(oTable);                                                                                                                                                                                                                             
				window.clearInterval(oIntervalCall);                                                                                                                                                                                                                       
			}.bind(this), 1000);                                                                                                                                                                                                                                        
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		//adjust the column width acc to length of the content                                                                                                                                                                                                       
		onAdjustTableCol: function (oTable) {                                                                                                                                                                                                                        
			let aCols = oTable.getColumns();                                                                                                                                                                                                                            
			for (var i = aCols.length - 1; i >= 0; i--) {                                                                                                                                                                                                               
				// if (i === 0) {                                                                                                                                                                                                                                          
				// 	aCols[i].setResizable(true);                                                                                                                                                                                                                           
				// 	oTable.autoResizeColumn(i);                                                                                                                                                                                                                            
				// 	aCols[i].setResizable(false);                                                                                                                                                                                                                          
				// } else {                                                                                                                                                                                                                                                
				// 	oTable.autoResizeColumn(i);                                                                                                                                                                                                                            
				// }                                                                                                                                                                                                                                                       
				//	aCols[i].setResizable(true);                                                                                                                                                                                                                            
				oTable.autoResizeColumn(i);                                                                                                                                                                                                                                
				//	aCols[i].setResizable(false);                                                                                                                                                                                                                           
			}                                                                                                                                                                                                                                                           
			oTable.setFixedColumnCount(1);                                                                                                                                                                                                                              
			this.getBusyDialog().close();                                                                                                                                                                                                                               
		},                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                               
		onChangeButtonReportingType: function (oEvent) {                                                                                                                                                                                                             
			let oFilterBar = this.getView().byId("idsmartFilterBar");                                                                                                                                                                                                   
			if (oFilterBar.validateMandatoryFields()) {                                                                                                                                                                                                                 
				oFilterBar.fireSearch();                                                                                                                                                                                                                                   
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            